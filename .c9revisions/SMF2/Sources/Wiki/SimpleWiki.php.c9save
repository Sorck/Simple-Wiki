{"ts":1356882368454,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":true,"ts":1356882373073,"patch":[[{"diffs":[[1,"<?php"]],"start1":0,"start2":0,"length1":0,"length2":5}]],"length":5,"saved":false}
{"ts":1356882374043,"patch":[[{"diffs":[[0,"<?php"],[1,"\n"]],"start1":0,"start2":0,"length1":5,"length2":6}]],"length":6,"saved":false}
{"ts":1356882493449,"patch":[[{"diffs":[[0,"?php"],[-1,"\n"],[1,"\r\n/*\r\nsimpleWiki - Copyright (c) Colonel Sorck 2010\r\nTHIS PACKAGE IS PROVIDED \"AS IS\" AND WITHOUT ANY WARRANTY. ANY EXPRESS OR\r\nIMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\r\nMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO\r\nEVENT SHALL THE AUTHORS BE LIABLE TO ANY PARTY FOR ANY DIRECT, INDIRECT,\r\nINCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES ARISING IN ANY WAY\r\nOUT OF THE USE OR MISUSE OF THIS PACKAGE.\r\nPermission is granted for use as long as all in-file and generated copyrights\r\nnotices remain intact\r\n\r\nWireless Templates: We currently have wireless templates for page viewing, and\r\nwe intend to add history and view all into the wireless templates.\r\n*/\r\n\r\n/*\r\nNAMESPACES\r\nwith this becoming a project open to development by many people a more efficient coding system has been created.\r\nA namespace is accessed by page=NS:pagename the source file in $sourcedir/wiki/NS.ns.php is then included and\r\nthe function NS() is called. This means new namespaces can theoretically be seperatley packaged. :)\r\nThere are no current examples of this new type of namespace as most still need to be converted.\r\n*/\r\n\r\nif(!defined('SMF'))\r\n    die('Hacking Attempt...');\r\n\r\nfunction wiki($call = false)\r\n{\r\n\tglobal $context, $txt, $scripturl;\r\n\tif($call)\r\n\t{\r\n\t\t//handle function calling for our function overide feature\r\n\t\t\r\n\t}\r\n\telse\r\n\t{\r\n\t\twiki_init();\r\n\t\t//if we can't view then we can't do anything\r\n\t\twiki_is_banned(false);\r\n\t\twikiIsAllowedTo('wiki_view');\r\n\t\tcall_user_func(wiki_main());\r\n\t}\r\n}\r\n\r\nfunction wiki_init()\r\n{\r\n\tglobal $context, $txt, $scripturl;\r\n\t$context['wiki_reports'] = array();\r\n\t$context['html_headers'] .= '<style type=\"text/css\">.decimal_list{list-style:none;}.span_margin{margin-left:0.8em;}.float_left{float:left;}.float_right{float:right;}</style>';\r\n\tloadLanguage('wiki');\r\n\tloadTemplate('wiki');\r\n\tif(isset($_REQUEST['p']))$_REQUEST['p']=htmlspecialchars($_REQUEST['p']);\r\n\t//linktree...\r\n\t$context['linktree'][] = array('name'=>$txt['wiki'],'url'=>$scripturl.'?action=wiki',);\r\n\t$context['name_space'] = false;\r\n\t$context['protection_array'] = array(\r\n\t\t0 => true, //obviously if there's no protection then you can edit it :P\r\n\t\t1 => $context['user']['is_admin'],\r\n\t\t2 => wikiAllowedTo('wiki_admin'),\r\n\t\t3 => $context['user']['is_logged'],\r\n\t);\r\n}\r\n\r\nfunction wiki_view_all()\r\n{\r\n\tglobal $smcFunc, $txt, $context, $scripturl;\r\n\t//this function lists all wiki pages\r\n\tif(!wikiAllowedTo('wiki_view'))redirectexit($scripturl.'?action=wiki');\r\n\t\r\n\t//Are we in wap, wap2, or imode?\r\n\tif(WIRELESS)$context['sub_template'] = WIRELESS_PROTOCOL.'_wiki_view_all';\r\n\t\t\r\n\t//declaired offset?\r\n\t$offset = isset($_REQUEST['start'])?floor(intval($_REQUEST['start'])):0;\r\n\t$res = $smcFunc['db_query']('', 'SELECT DISTINCT {db_prefix}wiki_pages.title\r\n\t\tFROM {db_prefix}wiki_pages\r\n\t\tORDER BY title ASC\r\n\t\tLIMIT {int:offset},25', array('offset'=>$offset));\r\n\t$pages = array();\r\n\twhile($row = $smcFunc['db_fetch_assoc']($res))\r\n\t{\r\n\t\t$pages[] = $row['title'];\r\n\t}\r\n\t//get total no. of pages in existence\r\n\t$allq = $smcFunc['db_query']('', 'SELECT DISTINCT {db_prefix}wiki_pages.title\r\n\t\tFROM {db_prefix}wiki_pages', array());\r\n\t$context['wiki_nrows'] = $smcFunc['db_num_rows']($allq);\r\n\t$context['page_title'] = $txt['wiki_view_all'];\r\n\t$context['wiki_template'] = 'view_all';\r\n\t$context['wiki_page_list'] = $pages;\r\n}\r\n\r\nfunction wiki_can_edit($p_level)\r\n{\r\n\tglobal $context;\r\n\t//this function handles protection, based upon given protection level\r\n\t$p_level = intval($p_level);\r\n\t//admin's are always allowed, not really admins otherwise :P\r\n\tif($context['user']['is_admin'])\r\n\t\treturn true;\r\n\t//if we can't edit then it's a definite no no, wiki admins being an exception\r\n\tif(!wikiAllowedTo('wiki_edit'))\r\n\t\treturn false;\r\n\t//if the protection level doesn't exist then someone's been doing some changes, we allow as long as they're not a guest\r\n\tif(!isset($context['protection_array'][$p_level]))\r\n\t\treturn $context['user']['is_logged']?true:false;\r\n\t//so lets get the protection level\r\n\treturn $context['protection_array'][$p_level];\r\n}\r\n\r\nfunction wiki_delete()\r\n{\r\n\tglobal $smcFunc, $context, $scripturl;\r\n\t//can we delete?\r\n\twikiIsAllowedTo('wiki_delete');\r\n\t//if there's no id then fatal error\r\n\tif(!isset($_REQUEST['id']))\r\n\t\tfatal_error($txt['wiki_no_page']);\r\n\t//fetch the page\r\n\t$page = wiki_fetch_pageById($_REQUEST['id']);\r\n\tif(!$page)\r\n\t\tfatal_error($txt['wiki_no_page']);\r\n\t//are we allowed to delete, based on edit protection\r\n\tif(!wiki_can_edit($page['protected']))\r\n\t\tredirectexit($scripturl.'?action=wiki;p='.$page['name']);\r\n\t$deleted = $page['deleted']=='1' ? 0:1;\r\n\t//now onto the query\r\n\t$smcFunc['db_query']('', 'UPDATE {db_prefix}wiki_pages\r\n\t\tSET deleted={int:deleted} WHERE id={int:id}', array('id'=>intval($page['id']), 'deleted'=>$deleted));\r\n\tredirectexit($scripturl.'?action=wiki;sa=history;p='.$page['title']);\r\n}\r\n\r\nfunction wiki_main()\r\n{\r\n\tglobal $sourcedir;\r\n\t// !!! maybe we could add dynamic file detection here?\r\n\t$sactions = array(\r\n\t\t'edit' => 'wiki_edit',\r\n\t\t'save' => 'wiki_save',\r\n\t\t'admin' => 'wiki_admin',\r\n\t\t'create' => 'wiki_create',\r\n\t\t'history' => 'wiki_history',\r\n\t\t'protect' => 'wiki_protect',\r\n\t\t'search' => 'wiki_search',\r\n\t\t'delete' => 'wiki_delete',\r\n\t\t'v_all' => 'wiki_view_all',\r\n\t);\r\n\tif(isset($_REQUEST['sa'])&&isset($sactions[$_REQUEST['sa']]))\r\n\t\treturn $sactions[$_REQUEST['sa']];\r\n\telseif(file_exists($sourcedir.'/wiki/'.$_REQUEST['sa'].'.function.php'))\r\n\t{\r\n\t\trequire_once($sourcedir.'/wiki/'.$_REQUEST['sa'].'.function.php');\r\n\t\t// fairly complex...\r\n\t\treturn 'wiki_'.(function_exists('wiki_'.$_REQUEST['sa']) ? $_REQUEST['sa']:'page');\r\n\t}\r\n\telse\r\n\t\treturn 'wiki_page';\r\n}\r\n\r\nfunction wiki_upload()\r\n{\r\n\tglobal $context, $txt, $scripturl, $boarddir, $smcFunc, $user_info;\r\n\t//Please deactivate on production environments\r\n\t$active = true;\r\n\tif(!$active)\r\n\t\tfatal_error('Uploads not activated');\r\n\twikiIsAllowedTo('wiki_upload');\r\n\tif(isset($_REQUEST['save'])&&isset($_FILES['wiki_file']))\r\n\t{\r\n\t\t//validate the file\r\n\t\t$filename = basename($_FILES['wiki_file']['name']);\r\n\t\t$extension = substr($filename, strrpos($filename, '.') + 1);\r\n\t\t$maxsize = 1000000; //1mb limit\r\n\t\t//allow jpegs, gifs, pdfs, pngs - will add admin cpanel choice later\r\n\t\t$exts = array('jpg', 'jpeg', 'gif', 'png', 'pdf');\r\n\t\tforeach($exts as $type)\r\n\t\t{\r\n\t\t\t$extensions[$type] = 1;\r\n\t\t}\r\n\t\tif(!isset($extensions[$extension]))\r\n\t\t\tfatal_error('Invalid Extension');\r\n\t\t//add the file to the database\r\n\t\t$smcFunc['db_insert']('insert', '{db_prefix}wiki_files', array('name'=>'string','hash'=>'string','user'=>'int'),\r\n\t\t\tarray($filename, $hash, $user_info['id']));\r\n\t\t//filename is a HASHED_SIZE . _ . ID . _ . FILENAME\r\n\t\t$hash = md5($_FILES['wiki_file']['size']);\r\n\t\t$goto = $boarddir.'/wiki_uploads/'.$hash.'';\r\n\t\tif($_FILES['wiki_file']['size']>=$maxsize)\r\n\t\t\tfatal_error('File Too Large');\r\n\t\t$v = move_uploaded_file($_FILES['wiki_file']['tmp_name'], $goto);\r\n\t\tif(!$v)\r\n\t\t\tfatal_error('Failed to create file on server');\r\n\r\n\t\tredirectexit($scripturl.'?action=wiki;sa=upload');\r\n\t}\r\n\t$context['page_title'] = 'Wiki Uploads';\r\n\t$context['wiki_template'] = 'upload';\r\n}\r\n\r\n//handles all file downloading, passes \r\nfunction wiki_download_file()\r\n{\r\n\tglobal $smcFunc, $txt;\r\n\tif(isset($_REQUEST['img']))\r\n\t\twiki_display_img();\r\n\tif(!isset($_REQUEST['file']))\r\n\t\tfatal_error($txt['wiki_no_file']);\r\n}\r\n\r\n//this function shows an uploaded image\r\nfunction wiki_display_img()\r\n{\r\n\tglobal $smcFunc, $context, $boarddir;\r\n\t//is there a requested image\r\n\t$req = isset($_REQUEST['id']) ? intval($_REQUEST['id']):false;\r\n\t//if there's no image then we can't do anything\r\n\tif(!$req)\r\n\t\tdie();\r\n\t$res = $smcFunc['db_query']('', 'SELECT * FROM {db_prefix}wiki_files WHERE id = {int:id}', array($req));\r\n\t$img = $smcFunc['db_fetch_assoc']($res);\r\n\t//no image? stop processing then\r\n\tif(!is_array($img))\r\n\t\tdie();\r\n\t$image = $boarddir.'/wiki_imgs/'.$img['image'];\r\n\tif($img['type'] == 'jpeg')\r\n\t{\r\n\t\t$im = imagecreatefromjpeg($image);\r\n\t\theader('content-type: image/jpeg');\r\n\t\timagejpeg($im);\r\n\t}\r\n\tif($img['type'] == 'gif')\r\n\t{\r\n\t\t$im = imagecreatefromgif($image);\r\n\t\theader('content-type: image/gif');\r\n\t\timagegif($im);\r\n\t}\r\n\tif($img['type'] == 'png')\r\n\t{\r\n\t\t$im = imagecreatefrompng($image);\r\n\t\theader('content-type: image/png');\r\n\t\timagepng($im);\r\n\t}\r\n\timagedestroy($im);\r\n\tdie();\r\n\t// !!! should record hits\r\n}\r\n\r\nfunction wiki_search()\r\n{\r\n\t//the mastery of searching :P\r\n\tglobal $txt, $smcFunc, $context, $scripurl;\r\n\t\r\n\t//Are we in wap, wap2, or imode?\r\n\tif(WIRELESS)$context['sub_template'] = WIRELESS_PROTOCOL.'_wiki_search';\r\n\t\r\n\t//are we allowed to search?\r\n\tif(!wikiAllowedTo('wiki_search'))\r\n\t\tredirectexit($scripturl.'?action=wiki');\r\n\t$context['page_title'] = $txt['search'];\r\n\t//is there a search term?\r\n\tif(isset($_REQUEST['q'])&&!empty($_REQUEST['q']))\r\n\t{\r\n\t\t$sql = 'SELECT distinct {db_prefix}wiki_pages.title, {db_prefix}members.real_name\r\n\t\tFROM {db_prefix}wiki_pages\r\n\t\t\tLEFT JOIN {db_prefix}members\r\n\t\t\tON {db_prefix}members.id_member = {db_prefix}wiki_pages.user\r\n\t\tWHERE {db_prefix}wiki_pages.title LIKE {string:query} OR {db_prefix}wiki_pages.content LIKE \"{raw:query}\"\r\n\t\tLIMIT 0,15';\r\n\t\t$res = $smcFunc['db_query']('', $sql, array('query'=>'%'.wiki_search_escape($_REQUEST['q']).'%'));\r\n\t\t$i = 0;\r\n\t\t$results = array();\r\n\t\twhile($row = $smcFunc['db_fetch_assoc']($res))\r\n\t\t{\r\n\t\t\tif($row!='1')\r\n\t\t\t{\r\n\t\t\t\t$results[] = $row;\r\n\t\t\t}\r\n\t\t\t$i++;\r\n\t\t}\r\n\t\t$context['wiki_search_results'] = $results;\r\n\t\t$context['page_title'] = sprintf($txt['wiki_search_query'], $_REQUEST['q']);\r\n\t}\r\n\t$context['wiki_template'] = 'search';\r\n}\r\n\r\nfunction wiki_protect()\r\n{\r\n\tglobal $txt, $context, $scripturl, $smcFunc;\r\n\t$context['robot_no_index'] = true;\r\n\twikiIsAllowedTo('wiki_protect');\r\n\t$context['page_title'] = $txt['wiki_protect_page'].': '.$_REQUEST['p'];\r\n\t$context['linktree'][] = array('url'=>'index.php?action=wiki;p='.$_REQUEST['p'], 'name' => $_REQUEST['p']);\r\n\t$context['linktree'][] = array('name'=>$txt['wiki_protect_page'],'url'=>'index.php?action=wiki;sa=protect;p='.$_REQUEST['p']);\r\n\t$page = wiki_fetch_page($_REQUEST['p'], true);\r\n\tif(!$page)fatal_error($txt['wiki_no_page']);\r\n\t$context['wiki_template'] = 'protect';\r\n\t$context['wiki_page'] = $page;\r\n\t$context['wiki_protect_options'] = array(\r\n\t\t'no_protection' => array('show'=>true, 'value'=>'no_protection', 'text'=>$txt['wiki_unprotect'], 'key'=>0),\r\n\t\t'forum_admin' => array('show'=>$context['user']['is_admin'], 'value'=>'forum_admin', 'text'=>$txt['wiki_admins_only'], 'key'=>1),\r\n\t\t'wiki_admin' => array('show'=>wikiAllowedTo('wiki_admin'), 'value'=>'wiki_admin', 'text'=>$txt['wiki_wadmins_only'], 'key'=>2),\r\n\t\t'no_guests' => array('show'=>$context['user']['is_logged'], 'value'=>'no_guests', 'text'=>$txt['wiki_no_guests'], 'key'=>3),\r\n\t);\r\n\t\r\n\tif(isset($_REQUEST['save'])&&isset($_POST['protect_form']))\r\n\t{\r\n\t\t//is the option in our list?\r\n\t\t$protect_id = $context['wiki_protect_options'][$_POST['protect_form']]['key'];\r\n\t\tif(isset($context['wiki_protect_options']))\r\n\t\t{\r\n\t\t\t$smcFunc['db_query']('', 'UPDATE {db_prefix}wiki_pages \r\n\t\t\t\tSET protected = {int:protect} \r\n\t\t\t\tWHERE title = {string:page} \r\n\t\t\t\tAND time = {int:time}\r\n\t\t\t\tLIMIT 1', \r\n\t\t\t\tarray(\r\n\t\t\t\t\t'protect' => $protect_id,\r\n\t\t\t\t\t'time' => $page['time'],\r\n\t\t\t\t\t'page' => $_REQUEST['p'],\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t\tredirectexit($scripturl.'?action=wiki;sa=protect;p='.$_REQUEST['p'].';updated');\r\n\t}\r\n}\r\n\r\nfunction wiki_history()\r\n{\r\n\tglobal $txt, $smcFunc, $user_info, $scripturl, $context;\r\n\t//are we allowed to see the history?\r\n\twikiIsAllowedTo('wiki_view_history');\r\n\t//does the page exist?\r\n\tif(!wiki_fetch_page($_REQUEST['p'], true))fatal_error(sprintf($txt['wiki_error_no_such_page'], $_REQUEST['p']));\r\n\t//do the query to get ALL history\r\n\t$sql = 'SELECT {db_prefix}wiki_pages.*, {db_prefix}members.member_name, {db_prefix}members.real_name \r\n\t\tFROM {db_prefix}wiki_pages LEFT JOIN {db_prefix}members \r\n\t\tON {db_prefix}wiki_pages.user={db_prefix}members.id_member \r\n\t\tWHERE title={string:name} \r\n\t\tORDER BY time DESC \r\n\t\tLIMIT {int:offset},10';\r\n\t$res = $smcFunc['db_query']('',$sql,array('name'=>$_REQUEST['p'],'offset'=>floor(intval($_REQUEST['start']))));\r\n\twhile($row = $smcFunc['db_fetch_assoc']($res))\r\n\t{\r\n\t\t$rows[] = $row;\r\n\t}\r\n\t//quickly find how many approapriate rows there are (without limit)\r\n\t$res = $smcFunc['db_query']('','SELECT * FROM {db_prefix}wiki_pages WHERE title={string:name}', array('name'=>$_REQUEST['p']));\r\n\t$_REQUEST['start'] = isset($_REQUEST['start'])?intval($_REQUEST['start']):0;\r\n\t$context['history_pageIndex'] = constructPageIndex($scripturl.'index.php?action=wiki;sa=history;p='.$_REQUEST['p'], $_REQUEST['start'], $smcFunc['db_num_rows']($res), 10);\r\n\t$context['history_pages'] = $rows;\r\n\t$context['wiki_template'] = 'history';\r\n\t$context['linktree'][] = array('url'=>'index.php?action=wiki;sa=history;p='.$_REQUEST['p'], 'name' => $txt['wiki_history'],);\r\n\t$context['page_title'] = $txt['wiki_history'];\r\n}\r\n\r\nfunction wiki_save()\r\n{\r\n\tglobal $txt, $smcFunc, $user_info, $scripturl;\r\n\t//are we allowed to save?\r\n\t$context['robot_no_index'] = true;\r\n\twikiIsAllowedTo('wiki_edit');\r\n\tif(!isset($_REQUEST['p']))fatal_error($txt['wiki_no_page']);\r\n\telseif(empty($_REQUEST['p']))fatal_error($txt['wiki_no_page']);\r\n\t// !!! should add a test for page protection\r\n\t//get current page & protection, if the page exists obviously\r\n\t$page = wiki_fetch_page($_REQUEST['p'], true, false);\r\n\t$protection = $page?$page['protected']:'0';\r\n\t$content = wiki_preparse($_POST['wiki_content']);\r\n\t//test for permission on wiki pages\r\n\tif(!isset($_POST['wiki_content']))fatal_error($txt['wiki_blank_content']);\r\n\t//now, attempt to save\r\n\t$smcFunc['db_insert']('insert', '{db_prefix}wiki_pages',\r\n\t\tarray(\r\n\t\t\t'title' => 'text', 'time' => 'int', 'ip' => 'text', 'user' => 'int', 'content' => 'text', 'protected' => 'text'\r\n\t\t),\r\n\t\tarray(\r\n\t\t\t$_REQUEST['p'], time(), $_SERVER['REMOTE_ADDR'], $user_info['id'], $content, $protection\r\n\t\t)\r\n\t);\r\n\t//now update the cache...\r\n\t$new = $page;\r\n\t$new['content'] = $content;\r\n\t$new['time'] = time();\r\n\tcache_put_data('wiki_'.$_REQUEST['p'], $new);\r\n\tredirectexit($scripturl.'?action=wiki;p='.$_REQUEST['p']);\r\n}\r\n\r\n// here are our permission functions...\r\nfunction wikiIsAllowedTo($perm)\r\n{\r\n\tif(allowedTo('wiki_admin'))\r\n\t\treturn true;\r\n\tisAllowedTo($perm);\r\n}\r\n\r\nfunction wikiAllowedTo($perm)\r\n{\r\n\tif(allowedTo('wiki_admin'))\r\n\t\treturn true;\r\n\tif(allowedTo($perm))\r\n\t\treturn true;\r\n\treturn false;\r\n}\r\n\r\nfunction wiki_create()\r\n{\r\n\tglobal $context, $txt, $modSettings, $scripturl, $sourcedir;\r\n\t$context['robot_no_index'] = true;\r\n\t//are we allowed to edit/create?\r\n\twikiIsAllowedTo('wiki_create');\t\r\n\t$page = isset($_REQUEST['p']) ? $_REQUEST['p'] : '';\r\n\tif(isset($_REQUEST['p']))\r\n\t{\r\n\t\t//fetch the page\r\n\t\t$pagecontent = wiki_fetch_page($page);\r\n\t\tif($pagecontent)redirectexit($scripturl.'?action=wiki;sa=edit;p='.$page);\r\n\t}\r\n\tif(WIRELESS)$context['sub_template'] = WIRELESS_PROTOCOL.'_wiki_edit';\r\n\t$context['wiki_template'] = 'create';\r\n\t$context['linktree'][] = array('url'=>'index.php?action=wiki;sa=create;p='.$page, 'name' => $txt['wiki_create'],);\r\n\t$context['page_title'] = sprintf($txt['wiki_creating'], $_REQUEST['p']);\r\n\t$modSettings['disable_wysiwyg'] = !empty($modSettings['disable_wysiwyg']) || empty($modSettings['enableBBC']);\r\n\trequire_once($sourcedir . '/Subs-Editor.php');\r\n\t$editorOptions = array(\r\n\t\t'id' => 'wiki_content',\r\n\t\t'value' => '',\r\n\t\t'labels' => array(\r\n\t\t\t'post_button' => 'Post',\r\n\t\t),\r\n\t\t// add height and width for the editor\r\n\t\t'height' => '175px',\r\n\t\t'width' => '100%',\r\n\t\t// We do XML preview here.\r\n\t\t'preview_type' => 2,\r\n\t);\r\n\tcreate_control_richedit($editorOptions);\r\n}\r\n\r\nfunction wiki_edit()\r\n{\r\n\tglobal $context, $txt, $modSettings, $scripturl, $sourcedir;\r\n\t$context['robot_no_index'] = true;\r\n\t$page = isset($_REQUEST['p']) ? $_REQUEST['p'] : 'Main Page';\r\n\t$_REQUEST['p'] = $page;\r\n\t//are we allowed to edit? if not then send them to the main wiki page\r\n\tif(!wikiAllowedTo('wiki_edit'))redirectexit('index.php?action=wiki;p='.$page);\r\n\t//fetch the page\r\n\t$pagecontent = wiki_fetch_page($page);\r\n\tif(!wiki_can_edit($pagecontent['protected']))fatal_error(sprintf($txt['wiki_is_protected'], $pagecontent['title']));\r\n\tif(!$pagecontent)redirectexit($scripturl.'?action=wiki;sa=create;p='.$page);\r\n\t$context['wiki_page_content'] = $pagecontent['content'];\r\n\tif(WIRELESS)$context['sub_template'] = WIRELESS_PROTOCOL.'_wiki_edit';\r\n\t$context['wiki_template'] = 'edit';\r\n\t$context['linktree'][] = array('url'=>'index.php?action=wiki;p='.$page, 'name' => $page,);\r\n\t$context['linktree'][] = array('url'=>'index.php?action=wiki;sa=edit;p='.$page, 'name' => $txt['wiki_edit'],);\r\n\t$context['page_title'] = sprintf($txt['wiki_editting'], htmlspecialchars($page));\r\n\t$modSettings['disable_wysiwyg'] = !empty($modSettings['disable_wysiwyg']) || empty($modSettings['enableBBC']);\r\n\trequire_once($sourcedir . '/Subs-Editor.php');\r\n\t$editorOptions = array(\r\n\t\t'id' => 'wiki_content',\r\n\t\t'value' => $context['wiki_page_content'],\r\n\t\t'labels' => array(\r\n\t\t\t'post_button' => 'Post',\r\n\t\t),\r\n\t\t// add height and width for the editor\r\n\t\t'height' => '175px',\r\n\t\t'width' => '100%',\r\n\t\t// We do XML preview here.\r\n\t\t'preview_type' => 2,\r\n\t);\r\n\tcreate_control_richedit($editorOptions);\r\n}\r\n\r\nfunction wiki_page()\r\n{\r\n\tglobal $context, $txt, $scripturl;\r\n\tif(WIRELESS)$context['sub_template'] = WIRELESS_PROTOCOL.'_wiki_page';\r\n\t$context['wiki_template'] = 'page'; //this loads up the template for viewing standard pages\r\n\t//namespaces\r\n\t$nameSpaces = array(\r\n\t\t//'User' => array('function'=>'user'),\r\n\t\t//'Category' => array('function'=>'cat'),\r\n\t);\r\n\r\n\t$parray = explode(':', $_REQUEST['p']);\r\n\tif(!isset($parray[1]))\r\n\t\t$nm = false;\r\n\telse\r\n\t\t$nm = $parray[0];\r\n\t\r\n\t$_REQUEST['p_namespace'] = isset($nm)&&isset($nameSpaces[$nm])?true:false;\r\n\t//$xy = isset($nm)&&isset($nameSpaces[$nm])?true:false;\r\n\t$_REQUEST['p_no_namespace'] = str_replace($nm.':', '', $_REQUEST['p']);\r\n\t$nm = strtolower($nm);\r\n\tif($nm !== false && isset($nameSpaces[$nm]))\r\n\t{\r\n\t\tcall_user_func('wiki_namespace_'.$nameSpaces[$nm]['function']);\r\n\t}\r\n\t//the above is our old ns system, the following will be better for future use :)\r\n\telseif($nm !== false && file_exists($sourcedir.'/wiki/'.$nm.'.ns.php'))\r\n\t{\r\n\t\trequire_once($sourcedir.'/wiki/'.$nm.'.ns.php');\r\n\t\tcall_user_func('wiki_namespace_'.$nm);\r\n\t}\r\n\t\t\r\n\tif(isset($_REQUEST['id'])&&!empty($_REQUEST['id']))\r\n\t{\r\n\t\t$content = wiki_fetch_pageById($_REQUEST['id']);\r\n\t\tif($content==false)fatal_error($txt['wiki_error_bad_id']);\r\n\t\t$context['page_title'] = $txt['wiki'].' - '.$content['title'];\r\n\t\t$_REQUEST['p'] = $content['title'];\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$page = isset($_REQUEST['p']) ? $_REQUEST['p'] : 'Main Page';\r\n\t\t$context['wiki_current_page'] = $page;\r\n\t\t$_REQUEST['p'] = $page;\r\n\t\t$context['page_title'] = $txt['wiki'].' - '.$page;\r\n\t\t$content = wiki_fetch_page($page);\r\n\t\tif($content==false&&!$_REQUEST['p_namespace'])redirectexit($scripturl.'?action=wiki;sa=create;p='.$_REQUEST['p']);\r\n\t}\r\n\t//if(!is_array($content))die(print_r($content));\r\n\t$context['wiki_page_content'] = wiki_parse($content['content'], true, true);\r\n\t$context['linktree'][] = array('url'=>'index.php?action=wiki;p='.$_REQUEST['p'], 'name' => $_REQUEST['p']);\r\n}\r\n\r\nfunction wiki_admin()\r\n{\r\n\tglobal $context, $txt;\r\n\t// !!! must work on, sensitive stuff should be in the main admin cp\r\n\t//we have our own admin cp dedicated just to the wiki!\r\n\tif(!wikiAllowedTo('wiki_admin'))redirectexit('index.php?action=wiki');\r\n\t$context['wiki_template'] = 'admin';\r\n\t$context['page_title'] = $txt['wiki_admin'];\r\n\t\r\n\t//areas\r\n\t$areas = array(\r\n\t\t'manage_bans' => 'wiki_manage_bans',\r\n\t\t'config' => 'wiki_admin_config',\r\n\t);\r\n\tif(isset($_REQUEST['area']) && isset($areas[$_REQUEST['area']]))\r\n\t\t$areas[$_REQUEST['area']]();\r\n}\r\n\r\nfunction wiki_manage_bans()\r\n{\r\n\tglobal $scripturl, $smcFunc, $context;\r\n\t$context['wiki_template'] = 'manage_bans';\r\n\t$offset = isset($_REQUEST['start']) ? intval($_REQUEST['start']) : 0;\r\n\t$res = $smcFunc['db_query']('', 'SELECT * FROM {db_prefix}wiki_bans LIMIT {int:offset},15', array('offset' => $offset));\r\n\twhile($row = $smcFunc['db_fetch_assoc']($res))\r\n\t{\r\n\t\t$context['list_bans'][] = $row;\r\n\t}\r\n\t//a little processing...\r\n\tif(isset($_REQUEST['save']) && isset($_POST['user']) && !empty($_POST['user']))\r\n\t{\r\n\t\t//proccess\r\n\t\t$u = intval($_POST['user']);\r\n\t\t$smcFunc['db_insert']('insert', '{db_prefix}wiki_bans', array('user' => 'int'), array($u));\r\n\t\tredirectexit($scripturl.'?action=wiki;sa=admin;area=manage_bans');\r\n\t}\r\n}\r\n\r\nfunction wiki_admin_config()\r\n{\r\n\tglobal $smcFunc;\r\n\t// !!! should this be stricter than wiki admins? such as a specific wiki_config permission?\r\n\t$context['wiki_template'] = 'config';\r\n}\r\n\r\nfunction wiki_fetch_page($name, $allow_deleted = false, $cache = true)\r\n{\r\n\tglobal $smcFunc;\r\n\t//first see if it's in the cache\r\n\tif($cache)$cached = cache_get_data('wiki_'.$name);\r\n\tif(!$cache || !$cached)\r\n\t{\r\n\t\t//select query\r\n\t\t$sql = \"SELECT * FROM {db_prefix}wiki_pages WHERE title={string:name}\".($allow_deleted?'':\"AND deleted='0'\").\"ORDER BY time DESC LIMIT 0,1\";\r\n\t\t$resource = $smcFunc['db_query']('', $sql, array('name'=>$name,));\r\n\t\t$row = $smcFunc['db_fetch_assoc']($resource);\r\n\t\t//store in the cache to reduce the number of queries in future page loads\r\n\t\tcache_put_data('wiki_'.$name, $row);\r\n\t}\r\n\telse\r\n\t\t$row = $cached;\r\n\t// !!! handle redirects\r\n\tif(!is_array($row)||empty($row['content']))\r\n\t\treturn false;\r\n\t\r\n\t//update the database to say we've viewed it\r\n\t$smcFunc['db_query']('', 'UPDATE {db_prefix}wiki_pages SET views = views + 1 WHERE title = {string:page}', array('page' => $row['title']));\r\n\t\r\n\treturn $row;\r\n}\r\n\r\nfunction wikiLog()\r\n{\r\n\tglobal $smcFunc, $user_info;\r\n\t//we don't have the db tables so don't do anything\r\n\treturn;\r\n\t$smcFunc['db_insert']('insert', '{db_prefix}wiki_log_view',\r\n\t\tarray('user' => 'int', 'ip' => 'text', 'page' => 'text'),\r\n\t\tarray($user_info['id'], $_SERVER['REMOTE_ADDR'], $_REQUEST['p']));\r\n}\r\n\r\nfunction wiki_fetch_pageById($id)\r\n{\r\n\tglobal $smcFunc;\r\n\t$cached = cache_get_data('wiki-id_'.$id);\r\n\tif(!$cached)\r\n\t{\r\n\t\t//select query\r\n\t\t$sql = \"SELECT * FROM {db_prefix}wiki_pages WHERE id={int:id} ORDER BY time DESC LIMIT 0,1\";\r\n\t\t$resource = $smcFunc['db_query']('', $sql, array('id'=>$id,));\r\n\t\t$row = $smcFunc['db_fetch_assoc']($resource);\r\n\t\tcache_put_data('wiki-id_'.$id);\r\n\t}\r\n\telse\r\n\t\t$row = $cached;\r\n\t// !!! handle redirects\r\n\tif(!is_array($row)||empty($row['content']))\r\n\t\treturn false;\r\n\treturn $row;\r\n}\r\n\r\n$wiki_headers = array();\r\n$last = array();\r\nfunction wiki_parse($text, $toc = false, $cats = false)\r\n{\r\n\tglobal $wiki_headers, $last;\r\n\t$text = censorText($text);\r\n\t$text = htmlspecialchars($text);\r\n\t$last['h2'] = 0;\r\n\t$toreturn =  parse_bbc($text, true);\r\n\t//if we want the TOC then give it to them\r\n\tif($toc)\r\n\t\t$toreturn = wiki_toc().$toreturn;\r\n\t//show categories?\r\n\tif($cats)\r\n\t\t$toreturn .= wiki_list_cats();\r\n\treturn $toreturn;\r\n}\r\n\r\nfunction wiki_make_h2($match)\r\n{\r\n\tglobal $wiki_headers, $last;\r\n\t$content = $match;\r\n\t$wiki_headers[$content] = array();\r\n\t$last['h2'] = $content;\r\n\t$toreturn = '<h2 class=\"largetext\"><a name=\"'.$content.'\">'.$content.'</a></h2><hr />';\r\n\treturn $toreturn;\r\n}\r\n\r\n$last['h2'] = 0;\r\n\r\nfunction wiki_make_h3($match)\r\n{\r\n\tglobal $wiki_headers, $last;\r\n\t$content = $match;\r\n\tif(!isset($last['h2']))\r\n\t{\r\n\t\t// !!! what should we do in this situation?\r\n\t\t//setting them to h2's seems logical but later proper h2's may be found\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$wiki_headers[$last['h2']][$content] = array();\r\n\t\t$last['h3'] = $content;\r\n\t\t$toreturn = '<h3><a name=\"'.$content.'\">'.$content.'</a></h3>';\r\n\t\treturn $toreturn;\r\n\t}\r\n}\r\n\r\nfunction wiki_toc()\r\n{\r\n\tglobal $wiki_headers;\r\n\t//settings\r\n\t$type = 'ol'; // either ul or ol\r\n\t//if wireless then a couple of changes are needed\r\n\tif(WIRELESS)$type='ul';\r\n\t$toc = '<'.$type.' class=\"decimal_list\">';\r\n\t$i_1 = isset($wiki_headers[0]) ? 0 : 1;\r\n\tforeach($wiki_headers as $act => $header)\r\n\t{\r\n\t\t$toc .= $i_1 == 0 ? '' : '<li>'.(WIRELESS ? '':'<span><strong><a href=\"#'.htmlspecialchars($act).'\">'.$i_1.'</strong></span>').'<span class=\"span_margin\">'.$act.'</a></span>';\r\n\t\tif(is_array($header))\r\n\t\t{\r\n\t\t\t$toc .= '<'.$type.' class=\"decimal_list\">';\r\n\t\t\t$i_2 = 1;\r\n\t\t\tforeach($header as $key => $var)\r\n\t\t\t{\r\n\t\t\t\t$toc .= '<li>'.(WIRELESS ? '':'<span><strong><a href=\"#'.htmlspecialchars($key).'\">'.$i_1.'.'.$i_2.'</strong>').'</span><span class=\"span_margin\">'.$key.'</a></span></li>';\r\n\t\t\t\t$i_2++;\r\n\t\t\t}\r\n\t\t\t$toc .= '</'.$type.'>';\r\n\t\t}\r\n\t\t$toc .= '</li>';\r\n\t\t$i_1++;\r\n\t}\r\n\t$toc .= '</'.$type.'>';\r\n\treturn $toc;\r\n}\r\n\r\nfunction wiki_preparse($string)\r\n{\r\n\t//this updates categories contained in the database\r\n\tglobal $smcFunc;\r\n\t$smcFunc['db_query']('', 'DELETE FROM {db_prefix}wiki_categories WHERE page_name={string:page}', array('page'=>$_REQUEST['p']));\r\n\t$string = preg_replace_callback('~\\[categories\\](.+)\\[/categories\\]~iUs', 'wiki_parse_categories', $string);\r\n\treturn $string;\r\n}\r\n\r\nfunction wiki_parse_categories($matches)\r\n{\r\n\tglobal $smcFunc;\r\n\t$cats = explode('#', $matches[1]);\r\n\tforeach($cats as $cat)\r\n\t{\r\n\t\t$smcFunc['db_insert']('insert', '{db_prefix}wiki_categories', array('cat_name'=>'text', 'page_name'=>'text'), array(htmlspecialchars($cat), $_REQUEST['p']));\r\n\t}\r\n\treturn '[categories]'.$matches[1].'[/categories]';\r\n}\r\n\r\nfunction wiki_search_escape($text)\r\n{\r\n\t$text = str_replace(array('\\'', '\"', '\\\\'), '', $text);\r\n\t//$text = addslashes($text);\r\n\treturn $text;\r\n}\r\n\r\nfunction wiki_list_cats()\r\n{\t\r\n\tglobal $smcFunc, $scripturl;\r\n\t//fetch cats\r\n\t$res = $smcFunc['db_query']('', 'SELECT *\r\n\t\tFROM {db_prefix}wiki_categories\r\n\t\tWHERE page_name = {string:page}', array('page'=>$_REQUEST['p']));\r\n\t$cats = '<div class=\"wiki_cats\">';\r\n\twhile($row = $smcFunc['db_fetch_assoc']($res))\r\n\t{\r\n\t\t$cats .= '[<a href=\"'.$scripturl.'?action=wiki;p=Category:'.$row['cat_name'].'\">'.$row['cat_name'].'</a>] ';\r\n\t}\r\n\t$cats .= '</div>';\r\n\treturn $cats;\r\n}\r\n$GLOBALS['wiki']['number_templates'] = 0;\r\n\r\n//this marvelous function parses the template code\r\nfunction parse_template($data)\r\n{\r\n\tglobal $scripturl;\r\n\t//if there's no data then return a parse error\r\n\t$GLOBALS['wiki']['number_templates'] ++;\r\n\t//if we're on the 15th or higher template then don't parse, this stops infinite parse loops & overloading the database\r\n\tif($GLOBALS['wiki']['number_templates']>=15)return;\r\n\tif(empty($data))return '<font size=50pt color=red>Template Parse Error!</font>';\r\n\t//the delimiter for variables, default is \"##\"\r\n\t$del = '##';\r\n\t$info = explode($del, $data);\r\n\t$template = isset($GLOBALS['wiki']['template'][$info[0]]) ? $GLOBALS['wiki']['template'][$info[0]] : wiki_fetch_page($info[0]);\r\n\t$GLOBALS['wiki']['template'][$info[0]] = $template;\r\n\t//if the template doesn't exist then we better link to the creation page or show a parse error\r\n\tif(!is_array($template))return wikiAllowedTo('wiki_create')?'<a href=\"'.$scripturl.'?action=wiki;sa=create;p='.htmlspecialchars($info[0]).'\">Create Template</a>':'<font size=50pt color=red>Template does not exist</font>';\r\n\t$temp = $template['content'];\r\n\t//any variables being passed? If not then there's no point running the regex\r\n\tif(isset($info[1]) && !empty($info[1]))\r\n\t{\r\n\t\t//we use the format of {var} for variable at the moment\r\n\t\tunset($info[0]);\r\n\t\t$GLOBALS['wiki']['temp'] = $info;\r\n\t\t//$temp = preg_replace_callback('~{([a-zA-Z0-9_-]+)}~', 'wiki_varf', $temp);\r\n\t\t//now for our varf experimental:\r\n\t\t$temp = preg_replace_callback('~{var:([0-9+)]}~', 'wiki_varfe', $temp);\r\n\t}\r\n\t//now lets parse & return it\r\n\treturn wiki_parse($temp);\r\n}\r\n\r\n//this is the superior function which allows {var:1}, {var:2}, etc so you can input [template]test##Sorck] and\r\n//the page of \"{var:1} is the author of SimpleWiki[br]Colonel {var:1} is what he is most commonly known as\"\r\n//replaces every instance of {var:1} with the 1st passed variable (in the example it is 'Sorck')\r\nfunction wiki_varfe($matches)\r\n{\r\n\t//the match better not be empty!\r\n\t$match = $matches[0];\r\n\tif(empty($match))return;\r\n\t$id = intval($matches[0]);\r\n\tif(!$id)\r\n\t\treturn;\r\n\tif(!isset($GLOBALS['wiki']['temp'][$id]))\r\n\t\treturn;\r\n\treturn un_htmlspecialchars($GLOBALS['wiki']['temp'][$id]);\r\n}\r\n\r\n//this is a function to aid in passing variables to templates\r\nfunction wiki_varf($matches)\r\n{\r\n\t//the match better have something in it!\r\n\t$match = $matches[0];\r\n\tif(empty($match))return;\r\n\t//is there an active variable to replace it with?\r\n\tforeach($GLOBALS['wiki']['temp'] as $act => $row)\r\n\t{\r\n\t\t$id = $act;\r\n\t\t//we only want the 1st available variable\r\n\t\tbreak;\r\n\t}\r\n\tif(!isset($id))return;\r\n\t$var = $GLOBALS['wiki']['temp'][$id];\r\n\t//better make sure it doesn't continue to exist\r\n\tunset($GLOBALS['wiki']['temp'][$id]);\r\n\t//now return the data\r\n\treturn un_htmlspecialchars($var);\r\n}\r\n\r\nfunction wiki_is_banned($fatal = false)\r\n{\r\n\tglobal $smcFunc, $user_info, $context;\r\n\t//if we've allready tested then no need to test again\r\n\tif(isset($context['wiki_banned']) && !$fatal) return;\r\n\t//\"innocent until proven guilty\" is our motto here\r\n\t$context['wiki_banned'] = false;\r\n\t$noban_admin = true;\r\n\t//admins can't be banned, else it would be chaos :P\r\n\tif(allowedTo('wiki_admin') && $noban_admin)\r\n\t\treturn false;\r\n\t//we cache our bans to reduce server load, this means a ban can take several minutes to come into effect\r\n\t$cache = cache_get_data('wiki_bans_'.$user_info['id']);\r\n\t//$cache = false;\r\n\tif(!$cache)\r\n\t{\r\n\t\t//now fetch from the banned table\r\n\t\t$res = $smcFunc['db_query']('', 'SELECT * \r\n\t\t\tFROM {db_prefix}wiki_bans \r\n\t\t\tWHERE ip = {string:ip} \r\n\t\t\tOR user = {int:user}',\r\n\t\t\tarray('ip'=>$_SERVER['REMOTE_ADDR'], 'user'=>$user_info['id'])\r\n\t\t);\r\n\t\t$row = $smcFunc['db_fetch_assoc']($res);\r\n\t\tif(!is_array($row))\r\n\t\t{\r\n\t\t\t$context['wiki_banned'] = false;\r\n\t\t\tcache_put_data('wiki_bans_'.$user_info['id'], array('banned' => false), 300);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tcache_put_data('wiki_bans_'.$user_info['id'], array('banned' => true), 300);\r\n\t\t\tif($fatal)\r\n\t\t\t\tfatal_error('You have been banned from the wiki, either because of your IP or user account, you may be able to continue browsing but you cannot edit any pages');\r\n\t\t\t$context['wiki_reports'][] = 'You\\'ve been banned from this wiki hence cannot edit pages.';\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\t//the cache says that we're banned! if fatal throw an error, else just return \r\n\telseif($cache['banned'])\r\n\t{\r\n\t\t$context['wiki_banned'] = true;\r\n\t\t$context['wiki_reports'][] = 'You\\'ve been banned from this wiki hence cannot edit pages.';\r\n\t\tif($fatal)\r\n\t\t{\r\n\t\t\tfatal_error('You have been banned from the wiki, either because of your IP or user account, you may be able to continue browsing but you cannot edit any pages');\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn true;\r\n\t}\r\n\t//I'd say we're not banned then\r\n\telse\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n//this function formats the URL depending upon if SEF/SEO/Pretty URLS are enabled :)\r\nfunction wiki_pageUrl($page_name, $type = 'page')\r\n{\r\n\tglobal $scripturl, $modsettings;\r\n\t//Is the wiki SEF online?\r\n\tif(empty($modsettings['wiki_sef_online']))\r\n\t\treturn $scripturl.'?action=wiki;p='.$page_name;\r\n\t$url = str_replace('index.php', '', $scripturl);\r\n\t$url .= 'wiki/';\r\n\t$conversions = array(\r\n\t\t'edit' => 'edit/',\r\n\t\t'page' => '',\r\n\t\t'protect' => 'protect/',\r\n\t\t'create' => 'create/',\r\n\t\t'history' => 'history/',\r\n\t);\r\n\tif($type == 'edit')\r\n\t{\r\n\t\t$url .= 'edit/';\r\n\t}\r\n\t$url .= $page_name;\r\n\treturn $url;\r\n}\r\n?>"]],"start1":1,"start2":1,"length1":5,"length2":31488}]],"length":31489,"saved":false}
{"ts":1356882581682,"patch":[[{"diffs":[[0,", $scripturl"],[1,", $sourcedir"],[0,";\r\n\tif($call"]],"start1":1294,"start2":1294,"length1":24,"length2":36}]],"length":31501,"saved":false}
{"ts":1356882587283,"patch":[[{"diffs":[[0,"cedir;\r\n"],[1,"    require_once($sourcedi)\r\n"],[0,"\tif($cal"]],"start1":1313,"start2":1313,"length1":16,"length2":45}]],"length":31530,"saved":false}
{"ts":1356882588615,"patch":[[{"diffs":[[0,"sourcedi"],[1,"r . "],[0,")\r\n\tif($"]],"start1":1339,"start2":1339,"length1":16,"length2":20}]],"length":31534,"saved":false}
{"ts":1356882590299,"patch":[[{"diffs":[[0,"cedir . "],[1,"'"],[0,")\r\n\tif($"]],"start1":1343,"start2":1343,"length1":16,"length2":17}]],"length":31535,"saved":false}
{"ts":1356882591320,"patch":[[{"diffs":[[0,"cedir . "],[1,"'/"],[0,"')\r\n\tif("]],"start1":1343,"start2":1343,"length1":16,"length2":18}]],"length":31537,"saved":false}
{"ts":1356882593403,"patch":[[{"diffs":[[0,"dir . '/"],[1,"Simpl"],[0,"')\r\n\tif("]],"start1":1345,"start2":1345,"length1":16,"length2":21}]],"length":31542,"saved":false}
{"ts":1356882596907,"patch":[[{"diffs":[[0," '/Simpl"],[1,"eWiki-Subs.php"],[0,"')\r\n\tif("]],"start1":1350,"start2":1350,"length1":16,"length2":30}]],"length":31556,"saved":false}
{"ts":1356882597609,"patch":[[{"diffs":[[0,"bs.php')"],[1,";"],[0,"\r\n\tif($c"]],"start1":1366,"start2":1366,"length1":16,"length2":17}]],"length":31557,"saved":false}
{"ts":1356882607624,"patch":[[{"diffs":[[0,"ki-Subs.php'"],[-1,")"],[0,";\r\n\tif($call"]],"start1":1361,"start2":1361,"length1":25,"length2":24}]],"length":31556,"saved":false}
{"ts":1356882611229,"patch":[[{"diffs":[[0,"    require_once"],[-1,"("],[1," "],[0,"$sourcedir . '/S"]],"start1":1321,"start2":1321,"length1":33,"length2":33}]],"length":31556,"saved":false}
{"ts":1356884703146,"patch":[[{"diffs":[[0,"_view');\r\n\t\t"],[1,"//"],[0,"call_user_fu"]],"start1":1586,"start2":1586,"length1":24,"length2":26}]],"length":31558,"saved":false}
{"ts":1356884742896,"patch":[[{"diffs":[[0,"else\r\n\t{\r\n\t\t"],[1,"//"],[0,"wiki_init();"]],"start1":1463,"start2":1463,"length1":24,"length2":26}]],"length":31560,"saved":false}
{"ts":1356884753574,"patch":[[{"diffs":[[0,"anything\r\n\t\t"],[1,"//"],[0,"wiki_is_bann"]],"start1":1529,"start2":1529,"length1":24,"length2":26}]],"length":31562,"saved":false}
{"ts":1356884764341,"patch":[[{"diffs":[[0,";\r\n\t"],[-1,"if($call)\r\n\t{\r\n\t\t//handle function calling for our function overide feature\r\n\t\t\r\n\t}\r\n\telse\r\n\t{\r\n\t\t//wiki_init();\r\n\t\t//if we can't view then we can't do anything\r\n\t\t//wiki_is_banned(false);\r\n\t\twikiIsAllowedTo('wiki_view');\r\n\t\t//call_user_func(wiki_main());\r\n\t}"],[1,"wikiIsAllowedTo();"],[0,"\r\n}\r"]],"start1":1373,"start2":1373,"length1":267,"length2":26}]],"length":31321,"saved":false}
{"ts":1356884767453,"patch":[[{"diffs":[[0,"lowedTo("],[1,"'view'"],[0,");\r\n}\r\n\r"]],"start1":1385,"start2":1385,"length1":16,"length2":22}]],"length":31327,"saved":false}
{"ts":1356884829400,"patch":[[{"diffs":[[0,"owedTo('"],[1,"swiki_"],[0,"view');\r"]],"start1":1386,"start2":1386,"length1":16,"length2":22}]],"length":31333,"saved":false}
{"ts":1356884831664,"patch":[[{"diffs":[[0,"wedTo('s"],[1,"imple"],[0,"wiki_vie"]],"start1":1387,"start2":1387,"length1":16,"length2":21}]],"length":31338,"saved":false}
{"ts":1356884837195,"patch":[[{"diffs":[[0,"dir . '/"],[1,"Wiki/"],[0,"SimpleWi"]],"start1":1345,"start2":1345,"length1":16,"length2":21}]],"length":31343,"saved":false}
{"ts":1356884844155,"patch":[[{"diffs":[[0,"ki_view');\r\n"],[1,"    \r\n"],[0,"}\r\n\r\nfunctio"]],"start1":1407,"start2":1407,"length1":24,"length2":30}]],"length":31349,"saved":false}
{"ts":1356884849304,"patch":[[{"diffs":[[0,");\r\n    "],[1,"// Parse the "],[0,"\r\n}\r\n\r\nf"]],"start1":1415,"start2":1415,"length1":16,"length2":29}]],"length":31362,"saved":false}
{"ts":1356884850949,"patch":[[{"diffs":[[0,"rse the "],[1,"request"],[0,"\r\n}\r\n\r\nf"]],"start1":1428,"start2":1428,"length1":16,"length2":23}]],"length":31369,"saved":false}
{"ts":1356884856670,"patch":[[{"diffs":[[0,"equest\r\n"],[1,"    \r\n"],[0,"}\r\n\r\nfun"]],"start1":1437,"start2":1437,"length1":16,"length2":22}]],"length":31375,"saved":false}
{"ts":1356884865148,"patch":[[{"diffs":[[0,"lobal $context, "],[-1,"$txt,"],[0," $scripturl, $so"]],"start1":1274,"start2":1274,"length1":37,"length2":32}]],"length":31370,"saved":false}
{"ts":1356884866107,"patch":[[{"diffs":[[0,"context,"],[-1," "],[0," $script"]],"start1":1281,"start2":1281,"length1":17,"length2":16}]],"length":31369,"saved":false}
{"ts":1356884872872,"patch":[[{"diffs":[[0,"\n\tglobal"],[-1," $context,"],[0," $script"]],"start1":1271,"start2":1271,"length1":26,"length2":16}]],"length":31359,"saved":false}
{"ts":1356884876335,"patch":[[{"diffs":[[0,"\n\tglobal"],[-1," $scripturl,"],[0," $source"]],"start1":1271,"start2":1271,"length1":28,"length2":16}]],"length":31347,"saved":false}
{"ts":1356884877783,"patch":[[{"diffs":[[0,"cedir;\r\n"],[1,"    // \r\n"],[0,"    requ"]],"start1":1285,"start2":1285,"length1":16,"length2":25}]],"length":31356,"saved":false}
{"ts":1356884884503,"patch":[[{"diffs":[[0,"\n    // "],[1,"Load some important SimpleWiki functions."],[0,"\r\n    re"]],"start1":1292,"start2":1292,"length1":16,"length2":57}]],"length":31397,"saved":false}
{"ts":1356884900275,"patch":[[{"diffs":[[0,"\r\n/*"],[1,"*"],[0,"\r\n"],[-1,"simpleWiki - Copyright (c) Colonel Sorck 2010\r\nTHIS PACKAGE IS PROVIDED \"AS IS\" AND WITHOUT ANY WARRANTY."],[1," * @file SimpleWiki-Subs.php\r\n * @author James Robson\r\n * \r\n * Copyright (c) 2012, James Robson\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\r\n * \r\n *   Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\r\n *   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND"],[0," ANY"]],"start1":5,"start2":5,"length1":115,"length2":717},{"diffs":[[0,"PRESS OR"],[-1,"\r\n"],[1," "],[0,"IMPLIED "]],"start1":725,"start2":725,"length1":18,"length2":17},{"diffs":[[0,"RANTIES,"],[1,"\r\n *"],[0," INCLUDI"]],"start1":745,"start2":745,"length1":16,"length2":20},{"diffs":[[0,"NTIES OF"],[-1,"\r\n"],[1," "],[0,"MERCHANT"]],"start1":806,"start2":806,"length1":18,"length2":17},{"diffs":[[0,"MED."],[1,"\r\n *"],[0," IN NO"],[-1,"\r\n"],[1," "],[0,"EVEN"]],"start1":879,"start2":879,"length1":16,"length2":19},{"diffs":[[0,"THE "],[-1,"AUTHORS BE LIABLE TO ANY PARTY"],[1,"COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE"],[0," FOR"]],"start1":906,"start2":906,"length1":38,"length2":50},{"diffs":[[0,"NDIRECT,"],[-1,"\r\n"],[1," "],[0,"INCIDENT"]],"start1":970,"start2":970,"length1":18,"length2":17},{"diffs":[[0,"EMPLARY,"],[1,"\r\n *"],[0," OR CONS"]],"start1":1002,"start2":1002,"length1":16,"length2":20},{"diffs":[[0,"GES "],[-1,"ARISING IN ANY WAY\r\nOUT OF THE USE OR MISUSE OF THIS PACKAGE.\r\nPermission is granted for use as long as all in-file and generated copyrights\r\nnotices remain intact\r\n\r\nWireless Templates: We currently have wireless templates for page viewing, and\r\nwe intend to add history and view all into the wireless templates.\r\n*/\r\n\r\n/*\r\nNAMESPACES\r\nwith this becoming a project open to development by many people a more efficient coding system has been created.\r\nA namespace is accessed by page=NS:pagename the source file in $sourcedir/wiki/NS.ns.php is then included and\r\nthe function NS() is called. This means new namespaces can theoretically be seperatley packaged. :)\r\nThere are no current examples of this new type of namespace as most still need to be converted"],[1,"(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,\r\n * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE"],[0,".\r\n*"]],"start1":1036,"start2":1036,"length1":765,"length2":385}]],"length":31639,"saved":false}
{"ts":1356884912761,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"// here are our permission functions...\r\nfunction wikiIsAllowedTo($perm)\r\n{\r\n\tif(allowedTo('wiki_admin'))\r\n\t\treturn true;\r\n\tisAllowedTo($perm);\r\n}\r\n\r\nfunction wikiAllowedTo($perm)\r\n{\r\n\tif(allowedTo('wiki_admin'))\r\n\t\treturn true;\r\n\tif(allowedTo($perm))\r\n\t\treturn true;\r\n\treturn false;\r\n}\r\n\r\n"],[0,"func"]],"start1":14389,"start2":14389,"length1":298,"length2":8}]],"length":31349,"saved":false}
{"ts":1356885090719,"patch":[[{"diffs":[[0,"st\r\n    "],[1,"$pag"],[0,"\r\n}\r\n\r\nf"]],"start1":1705,"start2":1705,"length1":16,"length2":20}]],"length":31353,"saved":false}
{"ts":1356885092465,"patch":[[{"diffs":[[0,"\n    $pa"],[-1,"g"],[0,"\r\n}\r\n\r\nf"]],"start1":1708,"start2":1708,"length1":17,"length2":16}]],"length":31352,"saved":false}
{"ts":1356885095037,"patch":[[{"diffs":[[0,"st\r\n    "],[-1,"$pa"],[1,"if(!i)"],[0,"\r\n}\r\n\r\nf"]],"start1":1705,"start2":1705,"length1":19,"length2":22}]],"length":31355,"saved":false}
{"ts":1356885096828,"patch":[[{"diffs":[[0,"   if(!i"],[1,"sset($R_"],[0,")\r\n}\r\n\r\n"]],"start1":1710,"start2":1710,"length1":16,"length2":24}]],"length":31363,"saved":false}
{"ts":1356885098949,"patch":[[{"diffs":[[0,"et($"],[-1,"R"],[0,"_"],[1,"request"],[0,")\r\n}"]],"start1":1720,"start2":1720,"length1":10,"length2":16}]],"length":31369,"saved":false}
{"ts":1356885101318,"patch":[[{"diffs":[[0,"_request"],[1,"['page"],[0,")\r\n}\r\n\r\n"]],"start1":1724,"start2":1724,"length1":16,"length2":22}]],"length":31375,"saved":false}
{"ts":1356885103166,"patch":[[{"diffs":[[0,"quest['p"],[-1,"age"],[1,"']"],[0,")\r\n}\r\n\r\n"]],"start1":1727,"start2":1727,"length1":19,"length2":18}]],"length":31374,"saved":false}
{"ts":1356885106323,"patch":[[{"diffs":[[0,"st['p'])"],[1,")\r\n    {"],[0,"\r\n}\r\n\r\nf"]],"start1":1730,"start2":1730,"length1":16,"length2":24}]],"length":31382,"saved":false}
{"ts":1356885108167,"patch":[[{"diffs":[[0,"\n    {\r\n"],[1,"        \r\n    }\r\n"],[0,"}\r\n\r\nfun"]],"start1":1740,"start2":1740,"length1":16,"length2":33}]],"length":31399,"saved":false}
{"ts":1356885109120,"patch":[[{"diffs":[[0,"        "],[1,"$_"],[0,"\r\n    }\r"]],"start1":1748,"start2":1748,"length1":16,"length2":18}]],"length":31401,"saved":false}
{"ts":1356885110698,"patch":[[{"diffs":[[0,"      $_"],[1,"R"],[0,"\r\n    }\r"]],"start1":1750,"start2":1750,"length1":16,"length2":17}]],"length":31402,"saved":false}
{"ts":1356885114955,"patch":[[{"diffs":[[0,"     $_R"],[1,"EQUEST['p'] = '';"],[0,"\r\n    }\r"]],"start1":1751,"start2":1751,"length1":16,"length2":33}]],"length":31419,"saved":false}
{"ts":1356885118872,"patch":[[{"diffs":[[0,"isset($_"],[-1,"request"],[1,"REQUE"],[0,"['p']))\r"]],"start1":1717,"start2":1717,"length1":23,"length2":21}]],"length":31417,"saved":false}
{"ts":1356885120191,"patch":[[{"diffs":[[0,"($_REQUE"],[1,"ST"],[0,"['p']))\r"]],"start1":1722,"start2":1722,"length1":16,"length2":18}]],"length":31419,"saved":false}
{"ts":1356885124481,"patch":[[{"diffs":[[0,"'p'] = '"],[1,"Main_Page"],[0,"';\r\n    "]],"start1":1766,"start2":1766,"length1":16,"length2":25}]],"length":31428,"saved":false}
{"ts":1356885136750,"patch":[[{"diffs":[[0,"equest\r\n"],[1,"    \r\n    //\r\n"],[0,"    if(!"]],"start1":1701,"start2":1701,"length1":16,"length2":30}]],"length":31442,"saved":false}
{"ts":1356885138410,"patch":[[{"diffs":[[0,"\r\n    //"],[1," "],[0,"\r\n    if"]],"start1":1713,"start2":1713,"length1":16,"length2":17}]],"length":31443,"saved":false}
{"ts":1356885139898,"patch":[[{"diffs":[[0,"\n    // "],[1,"You s"],[0,"\r\n    if"]],"start1":1714,"start2":1714,"length1":16,"length2":21}]],"length":31448,"saved":false}
{"ts":1356885142482,"patch":[[{"diffs":[[0," // "],[-1,"You s"],[1,"Com"],[0,"\r\n  "]],"start1":1718,"start2":1718,"length1":13,"length2":11}]],"length":31446,"saved":false}
{"ts":1356885148232,"patch":[[{"diffs":[[0,"  // Com"],[1,"e on people... request a page!"],[0,"\r\n    if"]],"start1":1717,"start2":1717,"length1":16,"length2":46}]],"length":31476,"saved":false}
{"ts":1356885156393,"patch":[[{"diffs":[[0,"    "],[-1,"$_REQUEST['p'] = 'Main_Page';"],[1,"redirectexit()"],[0,"\r\n  "]],"start1":1800,"start2":1800,"length1":37,"length2":22}]],"length":31461,"saved":false}
{"ts":1356885221997,"patch":[[{"diffs":[[0,"ectexit("],[-1,")"],[1,"$scripturl . '?action=wiki;p=Main_Page');"],[0,"\r\n    }\r"]],"start1":1809,"start2":1809,"length1":17,"length2":57}]],"length":31501,"saved":false}
{"ts":1356885231265,"patch":[[{"diffs":[[0,"ourcedir"],[1,", $scripturl"],[0,";\r\n    /"]],"start1":1524,"start2":1524,"length1":16,"length2":28}]],"length":31513,"saved":false}
{"ts":1356885243180,"patch":[[{"diffs":[[0,");\r\n"],[-1,"    // Parse the request\r\n"],[0,"    "]],"start1":1691,"start2":1691,"length1":34,"length2":8}]],"length":31487,"saved":false}
{"ts":1356885254415,"patch":[[{"diffs":[[0,".php';\r\n"],[1,"    // They better be allowed to view pages...\r\n"],[0,"\twikiIsA"]],"start1":1649,"start2":1649,"length1":16,"length2":64}]],"length":31535,"saved":false}
{"ts":1356885259664,"patch":[[{"diffs":[[0,"to view "],[-1,"pages"],[1,"the Wiki"],[0,"...\r\n\twi"]],"start1":1687,"start2":1687,"length1":21,"length2":24}]],"length":31538,"saved":false}
{"ts":1356885268395,"patch":[[{"diffs":[[0,"\n    }\r\n"],[1,"    \r\n    // Split \r\n"],[0,"}\r\n\r\nfun"]],"start1":1896,"start2":1896,"length1":16,"length2":37}]],"length":31559,"saved":false}
{"ts":1356885271810,"patch":[[{"diffs":[[0,"/ Split "],[1,"the request up int"],[0,"\r\n}\r\n\r\nf"]],"start1":1915,"start2":1915,"length1":16,"length2":34}]],"length":31577,"saved":false}
{"ts":1356885273141,"patch":[[{"diffs":[[0,"t up int"],[1,"o "],[0,"\r\n}\r\n\r\nf"]],"start1":1933,"start2":1933,"length1":16,"length2":18}]],"length":31579,"saved":false}
{"ts":1356885509338,"patch":[[{"diffs":[[0,"up into "],[1,"chu"],[0,"\r\n}\r\n\r\nf"]],"start1":1935,"start2":1935,"length1":16,"length2":19}]],"length":31582,"saved":false}
{"ts":1356885512806,"patch":[[{"diffs":[[0,"into chu"],[1,"nks...\r\n    ex"],[0,"\r\n}\r\n\r\nf"]],"start1":1938,"start2":1938,"length1":16,"length2":30}]],"length":31596,"saved":false}
{"ts":1356885516889,"patch":[[{"diffs":[[0,"nto "],[-1,"chunks...\r\n    ex"],[0,"\r\n}\r"]],"start1":1939,"start2":1939,"length1":25,"length2":8}]],"length":31579,"saved":false}
{"ts":1356885566533,"patch":[[{"diffs":[[0,"up into "],[1,"chunks"],[0,"\r\n}\r\n\r\nf"]],"start1":1935,"start2":1935,"length1":16,"length2":22}]],"length":31585,"saved":false}
{"ts":1356885578295,"patch":[[{"diffs":[[0," // "],[-1,"Split the request up into chunks"],[0,"\r\n}\r"]],"start1":1913,"start2":1913,"length1":40,"length2":8}]],"length":31553,"saved":false}
{"ts":1356885582421,"patch":[[{"diffs":[[0,"\n    // "],[1,"Split apart the "],[0,"\r\n}\r\n\r\nf"]],"start1":1909,"start2":1909,"length1":16,"length2":32}]],"length":31569,"saved":false}
{"ts":1356885595371,"patch":[[{"diffs":[[0,"art the "],[1,"page name a"],[0,"\r\n}\r\n\r\nf"]],"start1":1925,"start2":1925,"length1":16,"length2":27}]],"length":31580,"saved":false}
{"ts":1356885598004,"patch":[[{"diffs":[[0,"e name a"],[1,"nd "],[0,"\r\n}\r\n\r\nf"]],"start1":1936,"start2":1936,"length1":16,"length2":19}]],"length":31583,"saved":false}
{"ts":1356885671266,"patch":[[{"diffs":[[0,"ge name "],[-1,"and "],[0,"\r\n}\r\n\r\nf"]],"start1":1935,"start2":1935,"length1":20,"length2":16}]],"length":31579,"saved":false}
{"ts":1356885673604,"patch":[[{"diffs":[[0,"ge name "],[1,"from t"],[0,"\r\n}\r\n\r\nf"]],"start1":1935,"start2":1935,"length1":16,"length2":22}]],"length":31585,"saved":false}
{"ts":1356885674602,"patch":[[{"diffs":[[0,"t th"],[-1,"e page name from t"],[0,"\r\n}\r"]],"start1":1927,"start2":1927,"length1":26,"length2":8}]],"length":31567,"saved":false}
{"ts":1356885676094,"patch":[[{"diffs":[[0,"t ap"],[-1,"art th"],[0,"\r\n}\r"]],"start1":1921,"start2":1921,"length1":14,"length2":8}]],"length":31561,"saved":false}
{"ts":1356885678362,"patch":[[{"diffs":[[0," // "],[-1,"Split ap"],[0,"\r\n}\r"]],"start1":1913,"start2":1913,"length1":16,"length2":8}]],"length":31553,"saved":false}
{"ts":1356885905782,"patch":[[{"diffs":[[0,"\n    // "],[1,"Split up "],[0,"\r\n}\r\n\r\nf"]],"start1":1909,"start2":1909,"length1":16,"length2":25}]],"length":31562,"saved":false}
{"ts":1356885908526,"patch":[[{"diffs":[[0,"plit up "],[1,"the page\r\n    "],[0,"\r\n}\r\n\r\nf"]],"start1":1918,"start2":1918,"length1":16,"length2":30}]],"length":31576,"saved":false}
{"ts":1356885914794,"patch":[[{"diffs":[[0,"ge\r\n    "],[1,"$page_pa"],[0,"\r\n}\r\n\r\nf"]],"start1":1932,"start2":1932,"length1":16,"length2":24}]],"length":31584,"saved":false}
{"ts":1356885916703,"patch":[[{"diffs":[[0,"$page_pa"],[1,"rts "],[0,"\r\n}\r\n\r\nf"]],"start1":1940,"start2":1940,"length1":16,"length2":20}]],"length":31588,"saved":false}
{"ts":1356885917591,"patch":[[{"diffs":[[0,"e_parts "],[1,"= "],[0,"\r\n}\r\n\r\nf"]],"start1":1944,"start2":1944,"length1":16,"length2":18}]],"length":31590,"saved":false}
{"ts":1356886263510,"patch":[[{"diffs":[[0,"e page\r\n"],[1,"    $colpos = st\r\n"],[0,"    $pag"]],"start1":1928,"start2":1928,"length1":16,"length2":34}]],"length":31608,"saved":false}
{"ts":1356886266103,"patch":[[{"diffs":[[0,"pos = st"],[1,"rpos(')"],[0,"\r\n    $p"]],"start1":1944,"start2":1944,"length1":16,"length2":23}]],"length":31615,"saved":false}
{"ts":1356886267143,"patch":[[{"diffs":[[0,"strpos('"],[1,":'"],[0,")\r\n    $"]],"start1":1950,"start2":1950,"length1":16,"length2":18}]],"length":31617,"saved":false}
{"ts":1356886278219,"patch":[[{"diffs":[[0,"pos(':')"],[1,";"],[0,"\r\n    $p"]],"start1":1953,"start2":1953,"length1":16,"length2":17}]],"length":31618,"saved":false}
{"ts":1356886279700,"patch":[[{"diffs":[[0," strpos("],[1,"$"],[0,"':');\r\n "]],"start1":1949,"start2":1949,"length1":16,"length2":17}]],"length":31619,"saved":false}
{"ts":1356886283465,"patch":[[{"diffs":[[0,"strpos($"],[1,"_REQUEST['p"],[0,"':');\r\n "]],"start1":1950,"start2":1950,"length1":16,"length2":27}]],"length":31630,"saved":false}
{"ts":1356886284922,"patch":[[{"diffs":[[0,"UEST['p'"],[1,"],"],[0,":');\r\n  "]],"start1":1962,"start2":1962,"length1":16,"length2":18}]],"length":31632,"saved":false}
{"ts":1356886286566,"patch":[[{"diffs":[[0,"ST['p'],"],[1," '"],[0,":');\r\n  "]],"start1":1964,"start2":1964,"length1":16,"length2":18}]],"length":31634,"saved":false}
{"ts":1356886289213,"patch":[[{"diffs":[[0,"p'], ':');\r\n"],[1,"    if($)\r\n"],[0,"    $page_pa"]],"start1":1968,"start2":1968,"length1":24,"length2":35}]],"length":31645,"saved":false}
{"ts":1356886292296,"patch":[[{"diffs":[[0,"    if($"],[1,"colpos"],[0,")\r\n    $"]],"start1":1980,"start2":1980,"length1":16,"length2":22}]],"length":31651,"saved":false}
{"ts":1356886301290,"patch":[[{"diffs":[[0,"\n    if("],[1,"!"],[0,"$colpos)"]],"start1":1979,"start2":1979,"length1":16,"length2":17}]],"length":31652,"saved":false}
{"ts":1356886304899,"patch":[[{"diffs":[[0,"olpos)\r\n"],[1,"    {\r\n        \r\n    }\r\n"],[0,"    $pag"]],"start1":1990,"start2":1990,"length1":16,"length2":40}]],"length":31676,"saved":false}
{"ts":1356886306232,"patch":[[{"diffs":[[0," {\r\n        "],[1,"$page_"],[0,"\r\n    }\r\n   "]],"start1":2001,"start2":2001,"length1":24,"length2":30}]],"length":31682,"saved":false}
{"ts":1356886310561,"patch":[[{"diffs":[[0,"  $page_"],[1,"parts = array();"],[0,"\r\n    }\r"]],"start1":2011,"start2":2011,"length1":16,"length2":32}]],"length":31698,"saved":false}
{"ts":1356886375988,"patch":[[{"diffs":[[0,"ray("],[-1,");\r\n    }\r\n    $page_parts = "],[1,"'view', $_REQUEST['p']);\r\n    }\r\n    else\r\n    {\r\n        $page_parts = array()\r\n    }"],[0,"\r\n}\r"]],"start1":2029,"start2":2029,"length1":37,"length2":94}]],"length":31755,"saved":false}
{"ts":1356886414482,"patch":[[{"diffs":[[0,"= array("],[1,"substr($"],[0,")\r\n    }"]],"start1":2103,"start2":2103,"length1":16,"length2":24}]],"length":31763,"saved":false}
{"ts":1356886416213,"patch":[[{"diffs":[[0,"substr($"],[1,"_REQUEST"],[0,")\r\n    }"]],"start1":2111,"start2":2111,"length1":16,"length2":24}]],"length":31771,"saved":false}
{"ts":1356886420075,"patch":[[{"diffs":[[0,"_REQUEST"],[1,"['p'], "],[0,")\r\n    }"]],"start1":2119,"start2":2119,"length1":16,"length2":23}]],"length":31778,"saved":false}
{"ts":1356886427229,"patch":[[{"diffs":[[0,"bstr($_R"],[-1,"EQUEST['p']"],[0,", )\r\n   "]],"start1":2113,"start2":2113,"length1":27,"length2":16}]],"length":31767,"saved":false}
{"ts":1356886429538,"patch":[[{"diffs":[[0,"bstr($_R"],[1,"EQUEST['p']"],[0,", )\r\n   "]],"start1":2113,"start2":2113,"length1":16,"length2":27}]],"length":31778,"saved":false}
{"ts":1356886433574,"patch":[[{"diffs":[[0,"ST['p'],"],[1," 0,"],[0," )\r\n    "]],"start1":2125,"start2":2125,"length1":16,"length2":19}]],"length":31781,"saved":false}
{"ts":1356886437193,"patch":[[{"diffs":[[0,"p'], 0, "],[1,"$colpos"],[0,")\r\n    }"]],"start1":2129,"start2":2129,"length1":16,"length2":23}]],"length":31788,"saved":false}
{"ts":1356886441594,"patch":[[{"diffs":[[0," 0, $colpos)"],[1,", "],[0,"\r\n    }\r\n}\r\n"]],"start1":2133,"start2":2133,"length1":24,"length2":26}]],"length":31790,"saved":false}
{"ts":1356886444511,"patch":[[{"diffs":[[0,"olpos), "],[1,"substr()"],[0,"\r\n    }\r"]],"start1":2139,"start2":2139,"length1":16,"length2":24}]],"length":31798,"saved":false}
{"ts":1356886449554,"patch":[[{"diffs":[[0," substr("],[1,"$_REQUEST['p'], "],[0,")\r\n    }"]],"start1":2146,"start2":2146,"length1":16,"length2":32}]],"length":31814,"saved":false}
{"ts":1356886451459,"patch":[[{"diffs":[[0,"T['p'], "],[1,"$co"],[0,")\r\n    }"]],"start1":2162,"start2":2162,"length1":16,"length2":19}]],"length":31817,"saved":false}
{"ts":1356886453344,"patch":[[{"diffs":[[0,"p'], $co"],[1,"lpos, -1"],[0,")\r\n    }"]],"start1":2165,"start2":2165,"length1":16,"length2":24}]],"length":31825,"saved":false}
{"ts":1356886454638,"patch":[[{"diffs":[[0,"pos, -1)"],[1,")"],[0,"\r\n    }\r"]],"start1":2174,"start2":2174,"length1":16,"length2":17}]],"length":31826,"saved":false}
{"ts":1356886456124,"patch":[[{"diffs":[[0,"os, -1))"],[1,";"],[0,"\r\n    }\r"]],"start1":2175,"start2":2175,"length1":16,"length2":17}]],"length":31827,"saved":false}
{"ts":1356886478552,"patch":[[{"diffs":[[0,"lpos"],[-1,", -1"],[0,"));\r"]],"start1":2173,"start2":2173,"length1":12,"length2":8}]],"length":31823,"saved":false}
{"ts":1356886484743,"patch":[[{"diffs":[[0," $colpos"],[1,"+1"],[0,"));\r\n   "]],"start1":2169,"start2":2169,"length1":16,"length2":18}]],"length":31825,"saved":false}
{"ts":1356886512213,"patch":[[{"diffs":[[0,"   }\r\n    \r\n"],[1,"    //\r\n    \r\n"],[0,"    // Split"]],"start1":1898,"start2":1898,"length1":24,"length2":38}]],"length":31839,"saved":false}
{"ts":1356886513102,"patch":[[{"diffs":[[0,"\r\n    //"],[1," Page"],[0,"\r\n    \r\n"]],"start1":1908,"start2":1908,"length1":16,"length2":21}]],"length":31844,"saved":false}
{"ts":1356886518016,"patch":[[{"diffs":[[0,"   /"],[-1,"/ Page"],[1,"**\r\n     * "],[0,"\r\n  "]],"start1":1911,"start2":1911,"length1":14,"length2":19}]],"length":31849,"saved":false}
{"ts":1356886521601,"patch":[[{"diffs":[[0,"\n     * "],[1,"Page request format"],[0,"\r\n    \r\n"]],"start1":1918,"start2":1918,"length1":16,"length2":35}]],"length":31868,"saved":false}
{"ts":1356886524144,"patch":[[{"diffs":[[0,"format\r\n"],[1,"     * \r\n"],[0,"    \r\n  "]],"start1":1939,"start2":1939,"length1":16,"length2":25}]],"length":31877,"saved":false}
{"ts":1356886526204,"patch":[[{"diffs":[[0,"    * \r\n"],[1,"     */ \r\n"],[0,"    \r\n  "]],"start1":1948,"start2":1948,"length1":16,"length2":26}]],"length":31887,"saved":false}
{"ts":1356886532080,"patch":[[{"diffs":[[0,"\n     * "],[1,"PAGE_"],[0,"\r\n     *"]],"start1":1946,"start2":1946,"length1":16,"length2":21}]],"length":31892,"saved":false}
{"ts":1356886536219,"patch":[[{"diffs":[[0," * PAGE_"],[1,"NAMESPACE:"],[0,"\r\n     *"]],"start1":1951,"start2":1951,"length1":16,"length2":26}]],"length":31902,"saved":false}
{"ts":1356886539083,"patch":[[{"diffs":[[0,"MESPACE:"],[1,"PAGE_NAME"],[0,"\r\n     *"]],"start1":1961,"start2":1961,"length1":16,"length2":25}]],"length":31911,"saved":false}
{"ts":1356886540815,"patch":[[{"diffs":[[0,"E_NAME\r\n"],[1,"     * \r\n"],[0,"     */ "]],"start1":1972,"start2":1972,"length1":16,"length2":25}]],"length":31920,"saved":false}
{"ts":1356886541890,"patch":[[{"diffs":[[0,"\r\n     *"],[-1," "],[0,"\r\n     *"]],"start1":1978,"start2":1978,"length1":17,"length2":16}]],"length":31919,"saved":false}
{"ts":1356886543845,"patch":[[{"diffs":[[0,"ME\r\n"],[-1,"     *\r\n"],[0,"    "]],"start1":1976,"start2":1976,"length1":16,"length2":8}]],"length":31911,"saved":false}
{"ts":1356886623943,"patch":[[{"diffs":[[0,"\n    }\r\n"],[1,"    \r\n    // Is the requested 'n\r\n"],[0,"}\r\n\r\nfun"]],"start1":2269,"start2":2269,"length1":16,"length2":50}]],"length":31945,"saved":false}
{"ts":1356886625519,"patch":[[{"diffs":[[0,"ested 'n"],[1,"amespace' "],[0,"\r\n}\r\n\r\nf"]],"start1":2301,"start2":2301,"length1":16,"length2":26}]],"length":31955,"saved":false}
{"ts":1356886628239,"patch":[[{"diffs":[[0,"espace' "],[1,"valid?"],[0,"\r\n}\r\n\r\nf"]],"start1":2311,"start2":2311,"length1":16,"length2":22}]],"length":31961,"saved":false}
{"ts":1356886630050,"patch":[[{"diffs":[[0,"valid?\r\n"],[1,"    \r\n"],[0,"}\r\n\r\nfun"]],"start1":2319,"start2":2319,"length1":16,"length2":22}]],"length":31967,"saved":false}
{"ts":1356886744121,"patch":[[{"diffs":[[0,"d?\r\n    "],[1,"preg_match('/[^a-z_\\-0-9]/i', $string)"],[0,"\r\n}\r\n\r\nf"]],"start1":2323,"start2":2323,"length1":16,"length2":54}]],"length":32005,"saved":false}
{"ts":1356886749602,"patch":[[{"diffs":[[0,"d?\r\n    "],[1,"if("],[0,"preg_mat"]],"start1":2323,"start2":2323,"length1":16,"length2":19}]],"length":32008,"saved":false}
{"ts":1356886755486,"patch":[[{"diffs":[[0,"9]/i', $"],[-1,"string"],[1,"page_parts[0]"],[0,")\r\n}\r\n\r\n"]],"start1":2357,"start2":2357,"length1":22,"length2":29}]],"length":32015,"saved":false}
{"ts":1356886756519,"patch":[[{"diffs":[[0,"arts[0])"],[1,")"],[0,"\r\n}\r\n\r\nf"]],"start1":2371,"start2":2371,"length1":16,"length2":17}]],"length":32016,"saved":false}
{"ts":1356886757607,"patch":[[{"diffs":[[0,"s[0]))\r\n"],[1,"    \r\n"],[0,"}\r\n\r\nfun"]],"start1":2374,"start2":2374,"length1":16,"length2":22}]],"length":32022,"saved":false}
{"ts":1356886759703,"patch":[[{"diffs":[[0,"))\r\n    "],[1,"{\r\n        /\r\n    }"],[0,"\r\n}\r\n\r\nf"]],"start1":2378,"start2":2378,"length1":16,"length2":35}]],"length":32041,"saved":false}
{"ts":1356886761066,"patch":[[{"diffs":[[0,"       /"],[1,"/ "],[0,"\r\n    }\r"]],"start1":2390,"start2":2390,"length1":16,"length2":18}]],"length":32043,"saved":false}
{"ts":1356886762269,"patch":[[{"diffs":[[0,"     // "],[1,"error"],[0,"\r\n    }\r"]],"start1":2392,"start2":2392,"length1":16,"length2":21}]],"length":32048,"saved":false}
{"ts":1356886763288,"patch":[[{"diffs":[[0,"   // er"],[-1,"ror"],[0,"\r\n    }\r"]],"start1":2394,"start2":2394,"length1":19,"length2":16}]],"length":32045,"saved":false}
{"ts":1356886767466,"patch":[[{"diffs":[[0,"     // "],[-1,"er"],[1,"Error! Error!"],[0,"\r\n    }\r"]],"start1":2392,"start2":2392,"length1":18,"length2":29}]],"length":32056,"saved":false}
{"ts":1356886771205,"patch":[[{"diffs":[[0," // "],[-1,"Error! Error!"],[1,"Tut tu"],[0,"\r\n  "]],"start1":2396,"start2":2396,"length1":21,"length2":14}]],"length":32049,"saved":false}
{"ts":1356886778922,"patch":[[{"diffs":[[0,"/ Tut tu"],[1,"t tut. Invalid namespace.\r\n        fatal_err"],[0,"\r\n    }\r"]],"start1":2398,"start2":2398,"length1":16,"length2":60}]],"length":32093,"saved":false}
{"ts":1356886780937,"patch":[[{"diffs":[[0,"atal_err"],[1,"or(');"],[0,"\r\n    }\r"]],"start1":2442,"start2":2442,"length1":16,"length2":22}]],"length":32099,"saved":false}
{"ts":1356886784503,"patch":[[{"diffs":[[0,"_error('"],[1,"Iv'"],[0,");\r\n    "]],"start1":2446,"start2":2446,"length1":16,"length2":19}]],"length":32102,"saved":false}
{"ts":1356886786248,"patch":[[{"diffs":[[0,"rror('Iv"],[1,"alid names"],[0,"');\r\n   "]],"start1":2448,"start2":2448,"length1":16,"length2":26}]],"length":32112,"saved":false}
{"ts":1356886791399,"patch":[[{"diffs":[[0,"'Ivalid "],[-1,"names"],[1,"SimpleWiki namesapce "],[0,"');\r\n   "]],"start1":2453,"start2":2453,"length1":21,"length2":37}]],"length":32128,"saved":false}
{"ts":1356886795293,"patch":[[{"diffs":[[0,"mesapce "],[1,"detected."],[0,"');\r\n   "]],"start1":2474,"start2":2474,"length1":16,"length2":25}]],"length":32137,"saved":false}
{"ts":1356886807930,"patch":[[{"diffs":[[0,"tected.'"],[1,", false"],[0,");\r\n    "]],"start1":2484,"start2":2484,"length1":16,"length2":23}]],"length":32144,"saved":false}
{"ts":1356886854581,"patch":[[{"diffs":[[0,"have a v"],[1,"alid handler for t"],[0,"\r\n}\r\n\r\nf"]],"start1":2529,"start2":2529,"length1":16,"length2":34}]],"length":32191,"saved":false}
{"ts":1356886856649,"patch":[[{"diffs":[[0,"er for t"],[1,"h"],[0,"\r\n}\r\n\r\nf"]],"start1":2547,"start2":2547,"length1":16,"length2":17}]],"length":32192,"saved":false}
{"ts":1356886857603,"patch":[[{"diffs":[[0,"r for th"],[1,"is namesa"],[0,"\r\n}\r\n\r\nf"]],"start1":2548,"start2":2548,"length1":16,"length2":25}]],"length":32201,"saved":false}
{"ts":1356886859660,"patch":[[{"diffs":[[0,"is names"],[-1,"a"],[1,"pace?"],[0,"\r\n}\r\n\r\nf"]],"start1":2556,"start2":2556,"length1":17,"length2":21}]],"length":32205,"saved":false}
{"ts":1356886871041,"patch":[[{"diffs":[[0,"space?\r\n"],[1,"    if(file_exists()\r\n"],[0,"}\r\n\r\nfun"]],"start1":2563,"start2":2563,"length1":16,"length2":38}]],"length":32227,"saved":false}
{"ts":1356886872124,"patch":[[{"diffs":[[0,"_exists("],[1,"$sourc"],[0,")\r\n}\r\n\r\n"]],"start1":2582,"start2":2582,"length1":16,"length2":22}]],"length":32233,"saved":false}
{"ts":1356886874571,"patch":[[{"diffs":[[0,"s($sourc"],[1,"edir . '/wi"],[0,")\r\n}\r\n\r\n"]],"start1":2588,"start2":2588,"length1":16,"length2":27}]],"length":32244,"saved":false}
{"ts":1356886876719,"patch":[[{"diffs":[[0,"dir . '/"],[-1,"w"],[1,"Wik"],[0,"i)\r\n}\r\n\r"]],"start1":2597,"start2":2597,"length1":17,"length2":19}]],"length":32246,"saved":false}
{"ts":1356886878834,"patch":[[{"diffs":[[0,". '/Wiki"],[1,"/ns/"],[0,")\r\n}\r\n\r\n"]],"start1":2601,"start2":2601,"length1":16,"length2":20}]],"length":32250,"saved":false}
{"ts":1356886914626,"patch":[[{"diffs":[[0,"if(f"],[-1,"ile_exists($sourcedir . '/Wiki/ns/)"],[1,"unction_exists"],[0,"\r\n}\r"]],"start1":2575,"start2":2575,"length1":43,"length2":22}]],"length":32229,"saved":false}
{"ts":1356886924533,"patch":[[{"diffs":[[0,"n_exists"],[1,"()"],[0,"\r\n}\r\n\r\nf"]],"start1":2585,"start2":2585,"length1":16,"length2":18}]],"length":32231,"saved":false}
{"ts":1356886943969,"patch":[[{"diffs":[[0,"_exists("],[1,"'wiki_namespace_"],[0,")\r\n}\r\n\r\n"]],"start1":2586,"start2":2586,"length1":16,"length2":32}]],"length":32247,"saved":false}
{"ts":1356886946245,"patch":[[{"diffs":[[0,"mespace_"],[1,"' . "],[0,")\r\n}\r\n\r\n"]],"start1":2602,"start2":2602,"length1":16,"length2":20}]],"length":32251,"saved":false}
{"ts":1356886947661,"patch":[[{"diffs":[[0,"ace_' . "],[1,"$"],[0,")\r\n}\r\n\r\n"]],"start1":2606,"start2":2606,"length1":16,"length2":17}]],"length":32252,"saved":false}
{"ts":1356886953123,"patch":[[{"diffs":[[0,"ce_' . $"],[1,"page_parts[0]"],[0,")\r\n}\r\n\r\n"]],"start1":2607,"start2":2607,"length1":16,"length2":29}]],"length":32265,"saved":false}
{"ts":1356886955850,"patch":[[{"diffs":[[0,"arts[0])"],[1,")\r\n    {"],[0,"\r\n}\r\n\r\nf"]],"start1":2621,"start2":2621,"length1":16,"length2":24}]],"length":32273,"saved":false}
{"ts":1356886957294,"patch":[[{"diffs":[[0,"\n    {\r\n"],[1,"        \r\n    }\r\n"],[0,"}\r\n\r\nfun"]],"start1":2631,"start2":2631,"length1":16,"length2":33}]],"length":32290,"saved":false}
{"ts":1356886958525,"patch":[[{"diffs":[[0,"\n    }\r\n"],[1,"    \r\n"],[0,"}\r\n\r\nfun"]],"start1":2648,"start2":2648,"length1":16,"length2":22}]],"length":32296,"saved":false}
{"ts":1356886961259,"patch":[[{"diffs":[[0,"   \r\n    }\r\n"],[1,"    else\r\n"],[0,"    \r\n}\r\n\r\nf"]],"start1":2644,"start2":2644,"length1":24,"length2":34}]],"length":32306,"saved":false}
{"ts":1356886962769,"patch":[[{"diffs":[[0,"se\r\n    "],[1,"{\r\n        \r\n    }"],[0,"\r\n}\r\n\r\nf"]],"start1":2662,"start2":2662,"length1":16,"length2":34}]],"length":32324,"saved":false}
{"ts":1356886966313,"patch":[[{"diffs":[[0,"\n    {\r\n        "],[1,"// tut tu"],[0,"\r\n    }\r\n}\r\n\r\nfu"]],"start1":2665,"start2":2665,"length1":32,"length2":41}]],"length":32333,"saved":false}
{"ts":1356886967639,"patch":[[{"diffs":[[0,"/ tut tu"],[1,"t tt"],[0,"\r\n    }\r"]],"start1":2682,"start2":2682,"length1":16,"length2":20}]],"length":32337,"saved":false}
{"ts":1356886969960,"patch":[[{"diffs":[[0," // "],[-1,"tut tut tt"],[0,"\r\n  "]],"start1":2680,"start2":2680,"length1":18,"length2":8}]],"length":32327,"saved":false}
{"ts":1356886972153,"patch":[[{"diffs":[[0,"     // "],[1,"Well"],[0,"\r\n    }\r"]],"start1":2676,"start2":2676,"length1":16,"length2":20}]],"length":32331,"saved":false}
{"ts":1356886975835,"patch":[[{"diffs":[[0," // Well"],[1," this one plainly doesn'"],[0,"\r\n    }\r"]],"start1":2680,"start2":2680,"length1":16,"length2":40}]],"length":32355,"saved":false}
{"ts":1356886978113,"patch":[[{"diffs":[[0,"y doesn'"],[1,"t exist..."],[0,"\r\n    }\r"]],"start1":2704,"start2":2704,"length1":16,"length2":26}]],"length":32365,"saved":false}
{"ts":1356886979066,"patch":[[{"diffs":[[0,"ist...\r\n"],[1,"        /\r\n"],[0,"    }\r\n}"]],"start1":2716,"start2":2716,"length1":16,"length2":27}]],"length":32376,"saved":false}
{"ts":1356886980430,"patch":[[{"diffs":[[0,"       /"],[1,"/ "],[0,"\r\n    }\r"]],"start1":2725,"start2":2725,"length1":16,"length2":18}]],"length":32378,"saved":false}
{"ts":1356887047281,"patch":[[{"diffs":[[0,"AMAGE.\r\n"],[1," * \r\n * @todo Move namespaces to their own files.\r\n"],[0,"*/\r\n\r\nif"]],"start1":1412,"start2":1412,"length1":16,"length2":67},{"diffs":[[0,"        "],[-1,"// "],[0,"\r\n    }\r"]],"start1":2775,"start2":2775,"length1":19,"length2":16}]],"length":32426,"saved":false}
{"ts":1356887049418,"patch":[[{"diffs":[[0,"files.\r\n"],[1," * @todo h\r\n"],[0,"*/\r\n\r\nif"]],"start1":1463,"start2":1463,"length1":16,"length2":28}]],"length":32438,"saved":false}
{"ts":1356887052199,"patch":[[{"diffs":[[0,"* @todo "],[-1,"h"],[1,"Allow drag "],[0,"\r\n*/\r\n\r\n"]],"start1":1472,"start2":1472,"length1":17,"length2":27}]],"length":32448,"saved":false}
{"ts":1356887055731,"patch":[[{"diffs":[[0,"ow drag "],[1,"and drop extending of S"],[0,"\r\n*/\r\n\r\n"]],"start1":1483,"start2":1483,"length1":16,"length2":39}]],"length":32471,"saved":false}
{"ts":1356887058210,"patch":[[{"diffs":[[0,"ing of S"],[1,"impleWiki"],[0,"\r\n*/\r\n\r\n"]],"start1":1506,"start2":1506,"length1":16,"length2":25}]],"length":32480,"saved":false}
{"ts":1356887081258,"patch":[[{"diffs":[[0,"ne p"],[-1,"lainl"],[1,"atently"],[0,"y do"]],"start1":2800,"start2":2800,"length1":13,"length2":15}]],"length":32482,"saved":false}
{"ts":1356887082655,"patch":[[{"diffs":[[0,"patently"],[-1,"y"],[0," doesn't"]],"start1":2803,"start2":2803,"length1":17,"length2":16}]],"length":32481,"saved":false}
{"ts":1356887087322,"patch":[[{"diffs":[[0,"ist...\r\n        "],[1,"fatal_error(')"],[0,"\r\n    }\r\n}\r\n\r\nfu"]],"start1":2822,"start2":2822,"length1":32,"length2":46}]],"length":32495,"saved":false}
{"ts":1356887089304,"patch":[[{"diffs":[[0,"_error('"],[1,"Un"],[0,")\r\n    }"]],"start1":2843,"start2":2843,"length1":16,"length2":18}]],"length":32497,"saved":false}
{"ts":1356887090215,"patch":[[{"diffs":[[0,"rror('Un"],[1,"know"],[0,")\r\n    }"]],"start1":2845,"start2":2845,"length1":16,"length2":20}]],"length":32501,"saved":false}
{"ts":1356887092484,"patch":[[{"diffs":[[0,"('Unknow"],[1,"n SimpleWi"],[0,")\r\n    }"]],"start1":2849,"start2":2849,"length1":16,"length2":26}]],"length":32511,"saved":false}
{"ts":1356887095174,"patch":[[{"diffs":[[0,"SimpleWi"],[1,"ki namesapce re"],[0,")\r\n    }"]],"start1":2859,"start2":2859,"length1":16,"length2":31}]],"length":32526,"saved":false}
{"ts":1356887097686,"patch":[[{"diffs":[[0,"sapce re"],[-1,")"],[1,"quested');"],[0,"\r\n    }\r"]],"start1":2874,"start2":2874,"length1":17,"length2":26}]],"length":32535,"saved":false}
{"ts":1356887107996,"patch":[[{"diffs":[[0," {\r\n        "],[1,"// "],[0,"\r\n    }\r\n   "]],"start1":2740,"start2":2740,"length1":24,"length2":27}]],"length":32538,"saved":false}
{"ts":1356887114834,"patch":[[{"diffs":[[0,"     // "],[1,"Is it a "],[0,"\r\n    }\r"]],"start1":2747,"start2":2747,"length1":16,"length2":24}]],"length":32546,"saved":false}
{"ts":1356887117751,"patch":[[{"diffs":[[0,"Is it a "],[1,"special page"],[0,"\r\n    }\r"]],"start1":2755,"start2":2755,"length1":16,"length2":28}]],"length":32558,"saved":false}
{"ts":1356887152453,"patch":[[{"diffs":[[0," it "],[-1,"a special page"],[1,"the SW"],[0,"\r\n  "]],"start1":2757,"start2":2757,"length1":22,"length2":14}]],"length":32550,"saved":false}
{"ts":1356887159094,"patch":[[{"diffs":[[0,"t the SW"],[1," page"],[0,"\r\n    }\r"]],"start1":2759,"start2":2759,"length1":16,"length2":21}]],"length":32555,"saved":false}
{"ts":1356887166000,"patch":[[{"diffs":[[0," the SW page"],[1,"?\r\n        if($p)"],[0,"\r\n    }\r\n   "]],"start1":2760,"start2":2760,"length1":24,"length2":41}]],"length":32572,"saved":false}
{"ts":1356887167035,"patch":[[{"diffs":[[0,"   if($p"],[1,"age_par"],[0,")\r\n    }"]],"start1":2780,"start2":2780,"length1":16,"length2":23}]],"length":32579,"saved":false}
{"ts":1356887168740,"patch":[[{"diffs":[[0,"page_par"],[1,"ts[1] "],[0,")\r\n    }"]],"start1":2787,"start2":2787,"length1":16,"length2":22}]],"length":32585,"saved":false}
{"ts":1356887170280,"patch":[[{"diffs":[[0,"arts[1] "],[1,"== 'SW"],[0,")\r\n    }"]],"start1":2793,"start2":2793,"length1":16,"length2":22}]],"length":32591,"saved":false}
{"ts":1356887172602,"patch":[[{"diffs":[[0,"] == 'SW"],[1,"'"],[0,")\r\n    }"]],"start1":2799,"start2":2799,"length1":16,"length2":17}]],"length":32592,"saved":false}
{"ts":1356887179543,"patch":[[{"diffs":[[0,"] == 'SW"],[1,"_Special"],[0,"')\r\n    "]],"start1":2799,"start2":2799,"length1":16,"length2":24}]],"length":32600,"saved":false}
{"ts":1356887247062,"patch":[[{"diffs":[[0,"   }\r\n    \r\n"],[1,"    // Is it the special page?\r\n    $special = strt$page_parts[1] == 'wikispecial'\r\n    \r\n"],[0,"    // Do we"]],"start1":2609,"start2":2609,"length1":24,"length2":114},{"diffs":[[0," it the "],[-1,"SW"],[1,"special"],[0," page?\r\n"]],"start1":2847,"start2":2847,"length1":18,"length2":23},{"diffs":[[0,"== '"],[-1,"SW_S"],[1,"wikis"],[0,"peci"]],"start1":2896,"start2":2896,"length1":12,"length2":13}]],"length":32696,"saved":false}
{"ts":1356887248817,"patch":[[{"diffs":[[0,"l = strt"],[1,"olower("],[0,"$page_pa"]],"start1":2664,"start2":2664,"length1":16,"length2":23}]],"length":32703,"saved":false}
{"ts":1356887252617,"patch":[[{"diffs":[[0,"r($page_parts[1]"],[1,")"],[0," == 'wikispecial"]],"start1":2677,"start2":2677,"length1":32,"length2":33}]],"length":32704,"saved":false}
{"ts":1356887256328,"patch":[[{"diffs":[[0,"special'"],[1," ? : ;"],[0,"\r\n    \r\n"]],"start1":2703,"start2":2703,"length1":16,"length2":22}]],"length":32710,"saved":false}
{"ts":1356887260495,"patch":[[{"diffs":[[0,"ial'"],[-1," ? : "],[0,";\r\n "]],"start1":2707,"start2":2707,"length1":13,"length2":8}]],"length":32705,"saved":false}
{"ts":1356887435049,"patch":[[{"diffs":[[0,"s[1]) =="],[1,"="],[0," 'wikisp"]],"start1":2689,"start2":2689,"length1":16,"length2":17}]],"length":32706,"saved":false}
{"ts":1356887446998,"patch":[[{"diffs":[[0,"cial')\r\n"],[1,"        {\r\n            \r\n        }\r\n"],[0,"    }\r\n "]],"start1":2917,"start2":2917,"length1":16,"length2":52}]],"length":32742,"saved":false}
{"ts":1356887486288,"patch":[[{"diffs":[[0," $page_parts[0])"],[1," || $spe"],[0,")\r\n    {\r\n      "]],"start1":2818,"start2":2818,"length1":32,"length2":40}]],"length":32750,"saved":false}
{"ts":1356887489192,"patch":[[{"diffs":[[0," || $spe"],[1,"cial && "],[0,")\r\n    {"]],"start1":2834,"start2":2834,"length1":16,"length2":24}]],"length":32758,"saved":false}
{"ts":1356887492639,"patch":[[{"diffs":[[0,"cial && "],[1,"function_exists(wik"],[0,")\r\n    {"]],"start1":2842,"start2":2842,"length1":16,"length2":35}]],"length":32777,"saved":false}
{"ts":1356887493452,"patch":[[{"diffs":[[0,"_exists("],[-1,"wik"],[1,"'"],[0,")\r\n    {"]],"start1":2858,"start2":2858,"length1":19,"length2":17}]],"length":32775,"saved":false}
{"ts":1356887498147,"patch":[[{"diffs":[[0,"exists('"],[1,"wiki_special_namespace"],[0,")\r\n    {"]],"start1":2859,"start2":2859,"length1":16,"length2":38}]],"length":32797,"saved":false}
{"ts":1356887509558,"patch":[[{"diffs":[[0,"\n    if("],[1,"!$special && "],[0,"function"]],"start1":2775,"start2":2775,"length1":16,"length2":29}]],"length":32810,"saved":false}
{"ts":1356887515539,"patch":[[{"diffs":[[0,"\n    if("],[1,"("],[0,"!$specia"]],"start1":2775,"start2":2775,"length1":16,"length2":17},{"diffs":[[0,"arts[0])"],[1,")"],[0," || $spe"]],"start1":2840,"start2":2840,"length1":16,"length2":17}]],"length":32812,"saved":false}
{"ts":1356887519145,"patch":[[{"diffs":[[0,"0])) || "],[1,"("],[0,"$special"]],"start1":2845,"start2":2845,"length1":16,"length2":17}]],"length":32813,"saved":false}
{"ts":1356887521299,"patch":[[{"diffs":[[0,"mespace)"],[1,"))"],[0,"\r\n    {\r"]],"start1":2898,"start2":2898,"length1":16,"length2":18}]],"length":32815,"saved":false}
{"ts":1356887529836,"patch":[[{"diffs":[[0,"amespace"],[1,"'"],[0,")))\r\n   "]],"start1":2897,"start2":2897,"length1":16,"length2":17}]],"length":32816,"saved":false}
{"ts":1356887541498,"patch":[[{"diffs":[[0,"amespace"],[-1,"'"],[1,"_' "],[0,")))\r\n   "]],"start1":2897,"start2":2897,"length1":17,"length2":19}]],"length":32818,"saved":false}
{"ts":1356887544800,"patch":[[{"diffs":[[0,"space_' "],[1,". $page_parts[0]"],[0,")))\r\n   "]],"start1":2900,"start2":2900,"length1":16,"length2":32}]],"length":32834,"saved":false}
{"ts":1356887657533,"patch":[[{"diffs":[[0,"    "],[-1,"// Is it the special page?\r\n        if($page_parts[1] == 'wikispecial')\r\n        {\r\n            \r\n        }"],[0,"\r\n  "]],"start1":2940,"start2":2940,"length1":115,"length2":8}]],"length":32727,"saved":false}
{"ts":1356887659969,"patch":[[{"diffs":[[0," {\r\n        "],[1,"// if we'"],[0,"\r\n    }\r\n   "]],"start1":2932,"start2":2932,"length1":24,"length2":33}]],"length":32736,"saved":false}
{"ts":1356887665053,"patch":[[{"diffs":[[0,"     // "],[-1,"if we'"],[1,"If special then "],[0,"\r\n    }\r"]],"start1":2939,"start2":2939,"length1":22,"length2":32}]],"length":32746,"saved":false}
{"ts":1356887700087,"patch":[[{"diffs":[[0,"al then "],[1,"d"],[0,"\r\n    }\r"]],"start1":2955,"start2":2955,"length1":16,"length2":17}]],"length":32747,"saved":false}
{"ts":1356887701709,"patch":[[{"diffs":[[0,"l then d"],[1,"o"],[0,"\r\n    }\r"]],"start1":2956,"start2":2956,"length1":16,"length2":17}]],"length":32748,"saved":false}
{"ts":1356887704770,"patch":[[{"diffs":[[0,"al then "],[-1,"do"],[0,"\r\n    }\r"]],"start1":2955,"start2":2955,"length1":18,"length2":16}]],"length":32746,"saved":false}
{"ts":1356887757607,"patch":[[{"diffs":[[0,"\n     */"],[-1," "],[0,"\r\n    \r\n"]],"start1":2084,"start2":2084,"length1":17,"length2":16}]],"length":32745,"saved":false}
{"ts":1356887770904,"patch":[[{"diffs":[[0," // "],[-1,"If special then "],[1,"Load the names"],[0,"\r\n  "]],"start1":2942,"start2":2942,"length1":24,"length2":22}]],"length":32743,"saved":false}
{"ts":1356887772088,"patch":[[{"diffs":[[0,"// L"],[-1,"oad the names"],[0,"\r\n  "]],"start1":2943,"start2":2943,"length1":21,"length2":8}]],"length":32730,"saved":false}
{"ts":1356887773812,"patch":[[{"diffs":[[0,"     // "],[-1,"L"],[0,"\r\n    }\r"]],"start1":2938,"start2":2938,"length1":17,"length2":16}]],"length":32729,"saved":false}
{"ts":1356887778334,"patch":[[{"diffs":[[0,"        "],[-1,"// "],[1,"if"],[0,"\r\n    }\r"]],"start1":2935,"start2":2935,"length1":19,"length2":18}]],"length":32728,"saved":false}
{"ts":1356887780881,"patch":[[{"diffs":[[0,"      if"],[1,"($special)\r\n        {\r\n            \r\n        }"],[0,"\r\n    }\r"]],"start1":2937,"start2":2937,"length1":16,"length2":62}]],"length":32774,"saved":false}
{"ts":1356887785377,"patch":[[{"diffs":[[0,"\n        }\r\n"],[1,"        else\r\n        {\r\n            \r\n        }\r\n"],[0,"    }\r\n    e"]],"start1":2981,"start2":2981,"length1":24,"length2":74}]],"length":32824,"saved":false}
{"ts":1356887787529,"patch":[[{"diffs":[[0," {\r\n            "],[1,"// Load"],[0,"\r\n        }\r\n   "]],"start1":2964,"start2":2964,"length1":32,"length2":39}]],"length":32831,"saved":false}
{"ts":1356887789828,"patch":[[{"diffs":[[0," // Load"],[1," the namespace "],[0,"\r\n      "]],"start1":2979,"start2":2979,"length1":16,"length2":31}]],"length":32846,"saved":false}
{"ts":1356887791564,"patch":[[{"diffs":[[0,"amespace"],[1,"\r\n           "],[0," \r\n     "]],"start1":2993,"start2":2993,"length1":16,"length2":29}]],"length":32859,"saved":false}
{"ts":1356887806410,"patch":[[{"diffs":[[0,"ce\r\n            "],[1,"call_user_func()"],[0,"\r\n        }\r\n   "]],"start1":2999,"start2":2999,"length1":32,"length2":48}]],"length":32875,"saved":false}
{"ts":1356887809304,"patch":[[{"diffs":[[0,"er_func("],[1,"'wiki_special"],[0,")\r\n     "]],"start1":3022,"start2":3022,"length1":16,"length2":29}]],"length":32888,"saved":false}
{"ts":1356887812472,"patch":[[{"diffs":[[0,"wiki_special"],[1,"_namespace'"],[0,")\r\n        }"]],"start1":3031,"start2":3031,"length1":24,"length2":35}]],"length":32899,"saved":false}
{"ts":1356887814248,"patch":[[{"diffs":[[0,"mespace'"],[1,", "],[0,")\r\n     "]],"start1":3046,"start2":3046,"length1":16,"length2":18}]],"length":32901,"saved":false}
{"ts":1356887815220,"patch":[[{"diffs":[[0,"space', "],[1,"array"],[0,")\r\n     "]],"start1":3048,"start2":3048,"length1":16,"length2":21}]],"length":32906,"saved":false}
{"ts":1356887816499,"patch":[[{"diffs":[[0,"', array"],[1,"("],[0,")\r\n     "]],"start1":3053,"start2":3053,"length1":16,"length2":17}]],"length":32907,"saved":false}
{"ts":1356887818256,"patch":[[{"diffs":[[0,", array("],[1,"$page"],[0,")\r\n     "]],"start1":3054,"start2":3054,"length1":16,"length2":21}]],"length":32912,"saved":false}
{"ts":1356887821841,"patch":[[{"diffs":[[0,"ay($page"],[1,"_parts[1]"],[0,")\r\n     "]],"start1":3059,"start2":3059,"length1":16,"length2":25}]],"length":32921,"saved":false}
{"ts":1356887889088,"patch":[[{"diffs":[[0,"amespace"],[1,"_"],[0,"', array"]],"start1":3045,"start2":3045,"length1":16,"length2":17},{"diffs":[[0,"arts[1])"],[1,");"],[0,"\r\n      "]],"start1":3070,"start2":3070,"length1":16,"length2":18},{"diffs":[[0,"            "],[1,"// Load them up"],[0,"\r\n        }\r"]],"start1":3118,"start2":3118,"length1":24,"length2":39}]],"length":32939,"saved":false}
{"ts":1356887889908,"patch":[[{"diffs":[[0,"hem up\r\n"],[1,"            \r\n"],[0,"        "]],"start1":3139,"start2":3139,"length1":16,"length2":30}]],"length":32953,"saved":false}
{"ts":1356887890835,"patch":[[{"diffs":[[0,"hem up\r\n"],[-1,"            "],[0,"\r\n      "]],"start1":3139,"start2":3139,"length1":28,"length2":16}]],"length":32941,"saved":false}
{"ts":1356887892502,"patch":[[{"diffs":[[0,"    "],[-1,"    // Load them up\r\n"],[0,"\r\n  "]],"start1":3122,"start2":3122,"length1":29,"length2":8}]],"length":32920,"saved":false}
{"ts":1356887893611,"patch":[[{"diffs":[[0," {\r\n        "],[1,"    //"],[0,"\r\n        }\r"]],"start1":3114,"start2":3114,"length1":24,"length2":30}]],"length":32926,"saved":false}
{"ts":1356887897642,"patch":[[{"diffs":[[0,"      //"],[1," Get the page\r\n            $page"],[0,"\r\n      "]],"start1":3124,"start2":3124,"length1":16,"length2":48}]],"length":32958,"saved":false}
{"ts":1356887900557,"patch":[[{"diffs":[[0,"       $page"],[1," = "],[0,"\r\n        }\r"]],"start1":3152,"start2":3152,"length1":24,"length2":27}]],"length":32961,"saved":false}
{"ts":1356887908627,"patch":[[{"diffs":[[0,"$page = "],[1,"GetPage()"],[0,"\r\n      "]],"start1":3159,"start2":3159,"length1":16,"length2":25}]],"length":32970,"saved":false}
{"ts":1356887923853,"patch":[[{"diffs":[[0,"GetPage("],[1,"$page_+"],[0,")\r\n     "]],"start1":3167,"start2":3167,"length1":16,"length2":23}]],"length":32977,"saved":false}
{"ts":1356887925812,"patch":[[{"diffs":[[0,"e($page_"],[-1,"+"],[1,"pa"],[0,")\r\n     "]],"start1":3173,"start2":3173,"length1":17,"length2":18}]],"length":32978,"saved":false}
{"ts":1356887927784,"patch":[[{"diffs":[[0,"$page_pa"],[1,"rts[1]"],[0,")\r\n     "]],"start1":3175,"start2":3175,"length1":16,"length2":22}]],"length":32984,"saved":false}
{"ts":1356887929373,"patch":[[{"diffs":[[0,"arts[1])"],[1,";"],[0,"\r\n      "]],"start1":3182,"start2":3182,"length1":16,"length2":17}]],"length":32985,"saved":false}
{"ts":1356887935894,"patch":[[{"diffs":[[0,"parts[1]);\r\n"],[1,"            \r\n"],[0,"        }\r\n "]],"start1":3181,"start2":3181,"length1":24,"length2":38}]],"length":32999,"saved":false}
{"ts":1356888308843,"patch":[[{"diffs":[[0,"            "],[1,"if()"],[0,"\r\n        }\r"]],"start1":3193,"start2":3193,"length1":24,"length2":28}]],"length":33003,"saved":false}
{"ts":1356888310731,"patch":[[{"diffs":[[0,"     if("],[1,"!page"],[0,")\r\n     "]],"start1":3200,"start2":3200,"length1":16,"length2":21}]],"length":33008,"saved":false}
{"ts":1356888312522,"patch":[[{"diffs":[[0,"!page)\r\n"],[1,"            \r\n"],[0,"        "]],"start1":3208,"start2":3208,"length1":16,"length2":30}]],"length":33022,"saved":false}
{"ts":1356888314611,"patch":[[{"diffs":[[0,"            "],[1,"{\r\n                \r\n            }"],[0,"\r\n        }\r"]],"start1":3216,"start2":3216,"length1":24,"length2":58}]],"length":33056,"saved":false}
{"ts":1356888319238,"patch":[[{"diffs":[[0,"            "],[1,"// Redi"],[0,"\r\n          "]],"start1":3235,"start2":3235,"length1":24,"length2":31}]],"length":33063,"saved":false}
{"ts":1356888321940,"patch":[[{"diffs":[[0," // Redi"],[1,"rect to "],[0,"\r\n      "]],"start1":3246,"start2":3246,"length1":16,"length2":24}]],"length":33071,"saved":false}
{"ts":1356888322911,"patch":[[{"diffs":[[0,"rect to "],[1,"Creat"],[0,"\r\n      "]],"start1":3254,"start2":3254,"length1":16,"length2":21}]],"length":33076,"saved":false}
{"ts":1356888390140,"patch":[[{"diffs":[[0,"    "],[-1,"if(!page)\r\n            {\r\n                // Redirect to Creat\r\n            }"],[1,"// And now load the namespace\r\n            call_user_func('wiki_namespace_' . $page_parts[0], array());"],[0,"\r\n  "]],"start1":3201,"start2":3201,"length1":85,"length2":111}]],"length":33102,"saved":false}
{"ts":1356888442091,"patch":[[{"diffs":[[0,"s[0], array("],[1,"$"],[0,"));\r\n       "]],"start1":3293,"start2":3293,"length1":24,"length2":25}]],"length":33103,"saved":false}
{"ts":1356888444260,"patch":[[{"diffs":[[0," array($"],[1,"page"],[0,"));\r\n   "]],"start1":3298,"start2":3298,"length1":16,"length2":20}]],"length":33107,"saved":false}
{"ts":1356888450519,"patch":[[{"diffs":[[0," array($page"],[1,"_parts$page"],[0,"));\r\n       "]],"start1":3298,"start2":3298,"length1":24,"length2":35}]],"length":33118,"saved":false}
{"ts":1356888452676,"patch":[[{"diffs":[[0,"ge_parts"],[1,"[1], "],[0,"$page));"]],"start1":3308,"start2":3308,"length1":16,"length2":21}]],"length":33123,"saved":false}
{"ts":1356888482392,"patch":[[{"diffs":[[0,");\r\n    }\r\n}\r\n\r\n"],[1,"function wiki_namespace\r\n\r\n"],[0,"function wiki_in"]],"start1":3478,"start2":3478,"length1":32,"length2":59}]],"length":33150,"saved":false}
{"ts":1356888484651,"patch":[[{"diffs":[[0,"amespace"],[1,"_view($pag)"],[0,"\r\n\r\nfunc"]],"start1":3509,"start2":3509,"length1":16,"length2":27}]],"length":33161,"saved":false}
{"ts":1356888486407,"patch":[[{"diffs":[[0,"iew($pag"],[1,"e_uriname"],[0,")\r\n\r\nfun"]],"start1":3519,"start2":3519,"length1":16,"length2":25}]],"length":33170,"saved":false}
{"ts":1356888488628,"patch":[[{"diffs":[[0,"_uriname"],[1,", $page_"],[0,")\r\n\r\nfun"]],"start1":3528,"start2":3528,"length1":16,"length2":24}]],"length":33178,"saved":false}
{"ts":1356888490338,"patch":[[{"diffs":[[0,", $page_"],[-1,")"],[1,"data)\r\n{\r\n    \r\n    \r\n}"],[0,"\r\n\r\nfunc"]],"start1":3536,"start2":3536,"length1":17,"length2":39}]],"length":33200,"saved":false}
{"ts":1356888492332,"patch":[[{"diffs":[[0,"\r\n    \r\n"],[-1,"    \r\n"],[0,"}\r\n\r\nfun"]],"start1":3552,"start2":3552,"length1":22,"length2":16}]],"length":33194,"saved":false}
{"ts":1356888493844,"patch":[[{"diffs":[[0,"\n{\r\n    "],[1,"if(!$pag)"],[0,"\r\n}\r\n\r\nf"]],"start1":3550,"start2":3550,"length1":16,"length2":25}]],"length":33203,"saved":false}
{"ts":1356888496250,"patch":[[{"diffs":[[0,"if(!$pag"],[-1,")"],[1,"e_data)\r\n    {\r\n        \r\n    }"],[0,"\r\n}\r\n\r\nf"]],"start1":3558,"start2":3558,"length1":17,"length2":47}]],"length":33233,"saved":false}
{"ts":1356888499629,"patch":[[{"diffs":[[0,"ta)\r\n{\r\n"],[1,"    \r\n"],[0,"    if(!"]],"start1":3546,"start2":3546,"length1":16,"length2":22}]],"length":33239,"saved":false}
{"ts":1356888501619,"patch":[[{"diffs":[[0,");\r\n    }\r\n}\r\n\r\n"],[1,"/**\r\n * \r\n"],[0,"function wiki_na"]],"start1":3478,"start2":3478,"length1":32,"length2":42}]],"length":33249,"saved":false}
{"ts":1356888502941,"patch":[[{"diffs":[[0,"*\r\n * \r\n"],[1," * \r\n"],[0,"function"]],"start1":3496,"start2":3496,"length1":16,"length2":21}]],"length":33254,"saved":false}
{"ts":1356888503924,"patch":[[{"diffs":[[0,"\n * \r\n *"],[-1," "],[1,"/"],[0,"\r\nfuncti"]],"start1":3498,"start2":3498,"length1":17,"length2":17}]],"length":33254,"saved":false}
{"ts":1356888508264,"patch":[[{"diffs":[[0,"\r\n\r\n/**\r\n * "],[1,"Wiki page "],[0,"\r\n */\r\nfunct"]],"start1":3490,"start2":3490,"length1":24,"length2":34}]],"length":33264,"saved":false}
{"ts":1356888509525,"patch":[[{"diffs":[[0,"Wiki pag"],[-1,"e "],[0,"\r\n */\r\nf"]],"start1":3502,"start2":3502,"length1":18,"length2":16}]],"length":33262,"saved":false}
{"ts":1356888510908,"patch":[[{"diffs":[[0,"* Wiki p"],[-1,"ag"],[0,"\r\n */\r\nf"]],"start1":3500,"start2":3500,"length1":18,"length2":16}]],"length":33260,"saved":false}
{"ts":1356888514104,"patch":[[{"diffs":[[0,"* Wiki p"],[1,"age viewing namespac"],[0,"\r\n */\r\nf"]],"start1":3500,"start2":3500,"length1":16,"length2":36}]],"length":33280,"saved":false}
{"ts":1356888515525,"patch":[[{"diffs":[[0,"namespac"],[1,"e\r\n * "],[0,"\r\n */\r\nf"]],"start1":3520,"start2":3520,"length1":16,"length2":22}]],"length":33286,"saved":false}
{"ts":1356888516849,"patch":[[{"diffs":[[0,"mespace\r\n * "],[1,"@aut"],[0,"\r\n */\r\nfunct"]],"start1":3522,"start2":3522,"length1":24,"length2":28}]],"length":33290,"saved":false}
{"ts":1356888519847,"patch":[[{"diffs":[[0,"\n * @aut"],[1,"hor James Robson\r\n * "],[0,"\r\n */\r\nf"]],"start1":3530,"start2":3530,"length1":16,"length2":37}]],"length":33311,"saved":false}
{"ts":1356888521411,"patch":[[{"diffs":[[0," Robson\r\n * "],[1,"@"],[0,"\r\n */\r\nfunct"]],"start1":3547,"start2":3547,"length1":24,"length2":25}]],"length":33312,"saved":false}
{"ts":1356888523349,"patch":[[{"diffs":[[0,"son\r\n * "],[-1,"@"],[0,"\r\n */\r\nf"]],"start1":3551,"start2":3551,"length1":17,"length2":16}]],"length":33311,"saved":false}
{"ts":1356888528326,"patch":[[{"diffs":[[0," Robson\r\n * "],[1,"@param $page_uriname The "],[0,"\r\n */\r\nfunct"]],"start1":3547,"start2":3547,"length1":24,"length2":49}]],"length":33336,"saved":false}
{"ts":1356888529605,"patch":[[{"diffs":[[0,"ame The "],[1,"URIn"],[0,"\r\n */\r\nf"]],"start1":3576,"start2":3576,"length1":16,"length2":20}]],"length":33340,"saved":false}
{"ts":1356888533335,"patch":[[{"diffs":[[0,"The URIn"],[1,"ame of the page\r\n * @param "],[0,"\r\n */\r\nf"]],"start1":3580,"start2":3580,"length1":16,"length2":43}]],"length":33367,"saved":false}
{"ts":1356888534565,"patch":[[{"diffs":[[0," @param "],[1,"$"],[0,"\r\n */\r\nf"]],"start1":3607,"start2":3607,"length1":16,"length2":17}]],"length":33368,"saved":false}
{"ts":1356888535586,"patch":[[{"diffs":[[0,"@param $"],[1,"page_Data"],[0,"\r\n */\r\nf"]],"start1":3608,"start2":3608,"length1":16,"length2":25}]],"length":33377,"saved":false}
{"ts":1356888538159,"patch":[[{"diffs":[[0,"age_"],[-1,"D"],[1,"d"],[0,"ata"],[1," "],[0,"\r\n *"]],"start1":3617,"start2":3617,"length1":12,"length2":13}]],"length":33378,"saved":false}
{"ts":1356888540019,"patch":[[{"diffs":[[0,"ge_data "],[1,"The "],[0,"\r\n */\r\nf"]],"start1":3618,"start2":3618,"length1":16,"length2":20}]],"length":33382,"saved":false}
{"ts":1356888542666,"patch":[[{"diffs":[[0,"ata The "],[1,"data"],[0,"\r\n */\r\nf"]],"start1":3622,"start2":3622,"length1":16,"length2":20}]],"length":33386,"saved":false}
{"ts":1356888549318,"patch":[[{"diffs":[[0,"ata The "],[-1,"data"],[1,"contents of the page in array format or false o"],[0,"\r\n */\r\nf"]],"start1":3622,"start2":3622,"length1":20,"length2":63}]],"length":33429,"saved":false}
{"ts":1356888554352,"patch":[[{"diffs":[[0,"r false "],[-1,"o"],[1,"if the page does not exist."],[0,"\r\n */\r\nf"]],"start1":3668,"start2":3668,"length1":17,"length2":43}]],"length":33455,"saved":false}
{"ts":1356888563007,"patch":[[{"diffs":[[0,"ta)\r\n{\r\n    "],[1,"// "],[0,"\r\n    if(!$p"]],"start1":3762,"start2":3762,"length1":24,"length2":27}]],"length":33458,"saved":false}
{"ts":1356888566739,"patch":[[{"diffs":[[0,"\n    // "],[1,"If the page d"],[0,"\r\n    if"]],"start1":3769,"start2":3769,"length1":16,"length2":29}]],"length":33471,"saved":false}
{"ts":1356888575470,"patch":[[{"diffs":[[0,"e page d"],[1,"oesn't exist then redirect to page creation"],[0,"\r\n    if"]],"start1":3782,"start2":3782,"length1":16,"length2":59}]],"length":33514,"saved":false}
{"ts":1356888597411,"patch":[[{"diffs":[[0," {\r\n        "],[1,"fatal_"],[0,"\r\n    }\r\n}\r\n"]],"start1":3859,"start2":3859,"length1":24,"length2":30}]],"length":33520,"saved":false}
{"ts":1356888599452,"patch":[[{"diffs":[[0,"  fatal_"],[1,"error"],[0,"\r\n    }\r"]],"start1":3869,"start2":3869,"length1":16,"length2":21}]],"length":33525,"saved":false}
{"ts":1356888602376,"patch":[[{"diffs":[[0,"al_error"],[1,"()"],[0,"\r\n    }\r"]],"start1":3874,"start2":3874,"length1":16,"length2":18}]],"length":33527,"saved":false}
{"ts":1356888605508,"patch":[[{"diffs":[[0,"e requested'"],[1,", false"],[0,");\r\n    }\r\n}"]],"start1":3466,"start2":3466,"length1":24,"length2":31}]],"length":33534,"saved":false}
{"ts":1356888608906,"patch":[[{"diffs":[[0,"l_error("],[1,"''"],[0,")\r\n    }"]],"start1":3882,"start2":3882,"length1":16,"length2":18}]],"length":33536,"saved":false}
{"ts":1356888614655,"patch":[[{"diffs":[[0,"    "],[-1,"fatal_error('')"],[0,"\r\n  "]],"start1":3874,"start2":3874,"length1":23,"length2":8}]],"length":33521,"saved":false}
{"ts":1356888616602,"patch":[[{"diffs":[[0," {\r\n        "],[1,"d"],[0,"\r\n    }\r\n}\r\n"]],"start1":3866,"start2":3866,"length1":24,"length2":25}]],"length":33522,"saved":false}
{"ts":1356888618533,"patch":[[{"diffs":[[0,"        "],[-1,"d"],[1,"redirectexit"],[0,"\r\n    }\r"]],"start1":3870,"start2":3870,"length1":17,"length2":28}]],"length":33533,"saved":false}
{"ts":1356888620477,"patch":[[{"diffs":[[0,"rectexit"],[1,"('');"],[0,"\r\n    }\r"]],"start1":3882,"start2":3882,"length1":16,"length2":21}]],"length":33538,"saved":false}
{"ts":1356888625037,"patch":[[{"diffs":[[0,"ta)\r\n{\r\n"],[1,"    glob\r\n"],[0,"    // I"]],"start1":3769,"start2":3769,"length1":16,"length2":26}]],"length":33548,"saved":false}
{"ts":1356888627597,"patch":[[{"diffs":[[0,"    glob"],[1,"al $script"],[0,"\r\n    //"]],"start1":3777,"start2":3777,"length1":16,"length2":26}]],"length":33558,"saved":false}
{"ts":1356888628762,"patch":[[{"diffs":[[0," $script"],[1,"url;"],[0,"\r\n    //"]],"start1":3787,"start2":3787,"length1":16,"length2":20}]],"length":33562,"saved":false}
{"ts":1356888632100,"patch":[[{"diffs":[[0,"ectexit("],[1,"$scrip"],[0,"'');\r\n  "]],"start1":3907,"start2":3907,"length1":16,"length2":22}]],"length":33568,"saved":false}
{"ts":1356888635868,"patch":[[{"diffs":[[0,"t($scrip"],[-1,"'"],[1,"turl . '/?actio"],[0,"');\r\n   "]],"start1":3913,"start2":3913,"length1":17,"length2":31}]],"length":33582,"saved":false}
{"ts":1356888638529,"patch":[[{"diffs":[[0,"l . "],[-1,"'/?actio"],[0,"');\r"]],"start1":3924,"start2":3924,"length1":16,"length2":8}]],"length":33574,"saved":false}
{"ts":1356888639550,"patch":[[{"diffs":[[0,"pturl . "],[1,"'"],[0,"');\r\n   "]],"start1":3920,"start2":3920,"length1":16,"length2":17}]],"length":33575,"saved":false}
{"ts":1356888640413,"patch":[[{"diffs":[[0,"turl . '"],[1,"?action"],[0,"');\r\n   "]],"start1":3921,"start2":3921,"length1":16,"length2":23}]],"length":33582,"saved":false}
{"ts":1356888642608,"patch":[[{"diffs":[[0," '?actio"],[-1,"n"],[0,"');\r\n   "]],"start1":3927,"start2":3927,"length1":17,"length2":16}]],"length":33581,"saved":false}
{"ts":1356888643769,"patch":[[{"diffs":[[0," '?actio"],[1,"n"],[0,"');\r\n   "]],"start1":3927,"start2":3927,"length1":16,"length2":17}]],"length":33582,"saved":false}
{"ts":1356888644739,"patch":[[{"diffs":[[0,"'?action"],[1,"=wiki"],[0,"');\r\n   "]],"start1":3928,"start2":3928,"length1":16,"length2":21}]],"length":33587,"saved":false}
{"ts":1356888645893,"patch":[[{"diffs":[[0,"?action=wiki"],[1,";"],[0,"');\r\n    }\r\n"]],"start1":3929,"start2":3929,"length1":24,"length2":25}]],"length":33588,"saved":false}
{"ts":1356888647769,"patch":[[{"diffs":[[0,"on=wiki;"],[1,"n="],[0,"');\r\n   "]],"start1":3934,"start2":3934,"length1":16,"length2":18}]],"length":33590,"saved":false}
{"ts":1356888648791,"patch":[[{"diffs":[[0,"n=wiki;n"],[1,"s"],[0,"=');\r\n  "]],"start1":3935,"start2":3935,"length1":16,"length2":17}]],"length":33591,"saved":false}
{"ts":1356888654130,"patch":[[{"diffs":[[0,"on=wiki;"],[-1,"ns"],[1,"p"],[0,"=');\r\n  "]],"start1":3934,"start2":3934,"length1":18,"length2":17}]],"length":33590,"saved":false}
{"ts":1356888657969,"patch":[[{"diffs":[[0,"=wiki;p="],[1,"Create:"],[0,"');\r\n   "]],"start1":3936,"start2":3936,"length1":16,"length2":23}]],"length":33597,"saved":false}
{"ts":1356888660063,"patch":[[{"diffs":[[0,"=Create:"],[1,"Wiki"],[0,"');\r\n   "]],"start1":3943,"start2":3943,"length1":16,"length2":20}]],"length":33601,"saved":false}
{"ts":1356888661652,"patch":[[{"diffs":[[0,"ate:Wiki"],[1,"Special"],[0,"');\r\n   "]],"start1":3947,"start2":3947,"length1":16,"length2":23}]],"length":33608,"saved":false}
{"ts":1356888667146,"patch":[[{"diffs":[[0,"iSpecial"],[1,";"],[0,"');\r\n   "]],"start1":3954,"start2":3954,"length1":16,"length2":17}]],"length":33609,"saved":false}
{"ts":1356888670098,"patch":[[{"diffs":[[0,"Special;"],[1,"m="],[0,"');\r\n   "]],"start1":3955,"start2":3955,"length1":16,"length2":18}]],"length":33611,"saved":false}
{"ts":1356888671908,"patch":[[{"diffs":[[0,"Special;"],[-1,"m"],[1,"n"],[0,"=');\r\n  "]],"start1":3955,"start2":3955,"length1":17,"length2":17}]],"length":33611,"saved":false}
{"ts":1356888672821,"patch":[[{"diffs":[[0,"Special;"],[-1,"n"],[1,"t"],[0,"=');\r\n  "]],"start1":3955,"start2":3955,"length1":17,"length2":17}]],"length":33611,"saved":false}
{"ts":1356888677313,"patch":[[{"diffs":[[0,"cial;t='"],[1," . "],[0,");\r\n    "]],"start1":3958,"start2":3958,"length1":16,"length2":19}]],"length":33614,"saved":false}
{"ts":1356888678521,"patch":[[{"diffs":[[0,"l;t=' . "],[1,"url"],[0,");\r\n    "]],"start1":3961,"start2":3961,"length1":16,"length2":19}]],"length":33617,"saved":false}
{"ts":1356888681208,"patch":[[{"diffs":[[0,"=' . url"],[1,"encode($page_d"],[0,");\r\n    "]],"start1":3964,"start2":3964,"length1":16,"length2":30}]],"length":33631,"saved":false}
{"ts":1356888683494,"patch":[[{"diffs":[[0,"($page_d"],[1,"ata)"],[0,");\r\n    "]],"start1":3978,"start2":3978,"length1":16,"length2":20}]],"length":33635,"saved":false}
{"ts":1356888689278,"patch":[[{"diffs":[[0,"e($page_"],[-1,"data"],[0,"));\r\n   "]],"start1":3977,"start2":3977,"length1":20,"length2":16}]],"length":33631,"saved":false}
{"ts":1356888690206,"patch":[[{"diffs":[[0,"e($page_"],[1,"urin"],[0,"));\r\n   "]],"start1":3977,"start2":3977,"length1":16,"length2":20}]],"length":33635,"saved":false}
{"ts":1356888693143,"patch":[[{"diffs":[[0,"age_urin"],[1,"ame"],[0,"));\r\n   "]],"start1":3981,"start2":3981,"length1":16,"length2":19}]],"length":33638,"saved":false}
{"ts":1356888993289,"patch":[[{"diffs":[[0,"l;t=' . "],[1,"raw"],[0,"urlencod"]],"start1":3961,"start2":3961,"length1":16,"length2":19}]],"length":33641,"saved":false}
{"ts":1356889261551,"patch":[[{"diffs":[[0,"));\r\n    }\r\n"],[1,"    el\r\n"],[0,"}\r\n\r\nfunctio"]],"start1":3995,"start2":3995,"length1":24,"length2":32}]],"length":33649,"saved":false}
{"ts":1356889327832,"patch":[[{"diffs":[[0," }\r\n    "],[-1,"el"],[1,"// Output to the template engine."],[0,"\r\n}\r\n\r\nf"]],"start1":4003,"start2":4003,"length1":18,"length2":49}]],"length":33680,"saved":false}
{"ts":1356892371724,"patch":[[{"diffs":[[0,"late"],[-1," engine"],[0,".\r\n}"]],"start1":4032,"start2":4032,"length1":15,"length2":8}]],"length":33673,"saved":false}
{"ts":1356893312118,"patch":[[{"diffs":[[0,"arts[1]));\r\n"],[1,"            \r\n"],[0,"        }\r\n "]],"start1":3070,"start2":3070,"length1":24,"length2":38}]],"length":33687,"saved":false}
{"ts":1356893319963,"patch":[[{"diffs":[[0,"            "],[1,"wiki_"],[0,"\r\n        }\r"]],"start1":3082,"start2":3082,"length1":24,"length2":29}]],"length":33692,"saved":false}
{"ts":1356893323625,"patch":[[{"diffs":[[0,"   wiki_"],[1,"templat"],[0,"\r\n      "]],"start1":3091,"start2":3091,"length1":16,"length2":23}]],"length":33699,"saved":false}
{"ts":1356893327208,"patch":[[{"diffs":[[0,"    "],[-1,"    wiki_templat"],[0,"\r\n  "]],"start1":3086,"start2":3086,"length1":24,"length2":8}]],"length":33683,"saved":false}
{"ts":1356893328681,"patch":[[{"diffs":[[0,");\r\n"],[-1,"        \r\n"],[0,"    "]],"start1":3078,"start2":3078,"length1":18,"length2":8}]],"length":33673,"saved":false}
{"ts":1356893845134,"patch":[[{"diffs":[[0,"arts[1]));\r\n"],[1,"            $\r\n"],[0,"        }\r\n "]],"start1":3070,"start2":3070,"length1":24,"length2":39}]],"length":33688,"saved":false}
{"ts":1356893849315,"patch":[[{"diffs":[[0,"        "],[-1,"$"],[0,"\r\n      "]],"start1":3086,"start2":3086,"length1":17,"length2":16}]],"length":33687,"saved":false}
{"ts":1356893853055,"patch":[[{"diffs":[[0,"            "],[1,"wi"],[0,"\r\n        }\r"]],"start1":3082,"start2":3082,"length1":24,"length2":26}]],"length":33689,"saved":false}
{"ts":1356893854956,"patch":[[{"diffs":[[0,"        "],[-1,"w"],[1,"$wik"],[0,"i\r\n     "]],"start1":3086,"start2":3086,"length1":17,"length2":20}]],"length":33692,"saved":false}
{"ts":1356893857001,"patch":[[{"diffs":[[0,"      $w"],[-1,"iki"],[0,"\r\n      "]],"start1":3088,"start2":3088,"length1":19,"length2":16}]],"length":33689,"saved":false}
{"ts":1356893858417,"patch":[[{"diffs":[[0,"       $"],[-1,"w"],[1,"conte"],[0,"\r\n      "]],"start1":3087,"start2":3087,"length1":17,"length2":21}]],"length":33693,"saved":false}
{"ts":1356893859590,"patch":[[{"diffs":[[0,"  $conte"],[1,"xt[]"],[0,"\r\n      "]],"start1":3092,"start2":3092,"length1":16,"length2":20}]],"length":33697,"saved":false}
{"ts":1356893861381,"patch":[[{"diffs":[[0,"context["],[1,"'w"],[0,"]\r\n     "]],"start1":3095,"start2":3095,"length1":16,"length2":18}]],"length":33699,"saved":false}
{"ts":1356893864318,"patch":[[{"diffs":[[0,"ntext['w"],[1,"iki_theme'"],[0,"]\r\n     "]],"start1":3097,"start2":3097,"length1":16,"length2":26}]],"length":33709,"saved":false}
{"ts":1356893866908,"patch":[[{"diffs":[[0,"_theme']"],[1," = "],[0,"\r\n      "]],"start1":3108,"start2":3108,"length1":16,"length2":19}]],"length":33712,"saved":false}
{"ts":1356893870379,"patch":[[{"diffs":[[0,"eme'] = "],[1,"'spe'"],[0,"\r\n      "]],"start1":3111,"start2":3111,"length1":16,"length2":21}]],"length":33717,"saved":false}
{"ts":1356893872412,"patch":[[{"diffs":[[0,"] = 'spe"],[1,"cial_na"],[0,"'\r\n     "]],"start1":3115,"start2":3115,"length1":16,"length2":23}]],"length":33724,"saved":false}
{"ts":1356893874830,"patch":[[{"diffs":[[0,"ecial_na"],[1,"mespace_"],[0,"'\r\n     "]],"start1":3122,"start2":3122,"length1":16,"length2":24}]],"length":33732,"saved":false}
{"ts":1356893875959,"patch":[[{"diffs":[[0,"espace_'"],[1," . "],[0,"\r\n      "]],"start1":3131,"start2":3131,"length1":16,"length2":19}]],"length":33735,"saved":false}
